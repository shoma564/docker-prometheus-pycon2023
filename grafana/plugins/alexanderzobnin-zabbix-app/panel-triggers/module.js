/*! For license information please see module.js.LICENSE.txt */
define(["@emotion/css","@grafana/data","@grafana/runtime","@grafana/ui","app/core/core","lodash","moment","react","react-dom"],((e,t,n,r,o,a,s,i,l)=>(()=>{var c={42:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)&&n.length){var s=o.apply(null,n);s&&e.push(s)}else if("object"===a)for(var i in n)r.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},8772:(e,t,n)=>{"use strict";var r=n(331);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,s){if(s!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},3615:(e,t,n)=>{e.exports=n(8772)()},331:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7644:t=>{"use strict";t.exports=e},3305:e=>{"use strict";e.exports=t},3545:e=>{"use strict";e.exports=n},7388:e=>{"use strict";e.exports=r},7294:e=>{"use strict";e.exports=o},5980:e=>{"use strict";e.exports=a},8283:e=>{"use strict";e.exports=s},2650:e=>{"use strict";e.exports=i},2729:e=>{"use strict";e.exports=l}},u={};function d(e){var t=u[e];if(void 0!==t)return t.exports;var n=u[e]={exports:{}};return c[e](n,n.exports,d),n.exports}d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var p={};return(()=>{"use strict";d.r(p),d.d(p,{plugin:()=>qt});var e,t,n,r,o,a,s=d(3305),i=d(5980),l=d.n(i),c=d(8283),u=d.n(c);(a=e||(e={})).Group="group",a.Host="host",a.Application="application",a.Macro="macro",a.ItemTag="itemTag",a.Item="item",a.ItemValues="itemValues",(o=t||(t={})).Problems="problems",o.Recent="recent",o.History="history";class m extends s.BusEventWithPayload{}function h(e,t){const n=function(e){const t=[];let n=!1,r=!1;let o="";return l().forEach(e,(e=>{'"'===e&&r?o+=e:'"'===e&&n?n=!1:'"'!==e||n?"["!==e||n?"]"!==e||n?","!==e||n||r?o+=e:(t.push(o),o=""):r=!1:r=!0:n=!0})),t.push(o),t}(t.substring(t.indexOf("[")+1,t.lastIndexOf("]")));for(let t=n.length;t>=1;t--)e=e.replace("$"+t,n[t-1]);return e}function g(e,t){try{const n=function(e){const t=/(^[\d]+)(y|M|w|d|h|m|s)/g.exec(e);return u().duration(Number(t[1]),t[2]).valueOf()}(t);return Date.now()-1e3*e.timestamp<n}catch(e){return!1}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}m.type="zbx-query-updated",function(e){e.UserLogin="userLogin",e.Token="token"}(n||(n={})),function(e){e.AndOr="0",e.Or="2"}(r||(r={})),(()=>{const e={},t=(0,s.getValueFormats)();for(const n of t)for(const t of n.submenu){const n=t.value;e[n]=n}})();var v=d(2650),y=d.n(v),b=d(3545),E=d(7294),w=d(7644),P=d(42),C=d.n(P),x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function S(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}const k={get:function(e,t,n){if(!t)return e;var r=T(t),o=void 0;try{o=r.reduce((function(e,t){return e[t]}),e)}catch(e){}return void 0!==o?o:n},set:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=T(t),o=void 0,a=e;(o=r.shift())&&r.length;)a[o]||(a[o]={}),a=a[o];return a[o]=n,e},takeRight:function(e,t){var n=t>e.length?0:e.length-t;return e.slice(n)},last:function(e){return e[e.length-1]},orderBy:function(e,t,n,r){return e.sort((function(e,o){for(var a=0;a<t.length;a+=1){var s=t[a],i=!1===n[a]||"desc"===n[a],l=s(e,o);if(l)return i?-l:l}return n[0]?e[r]-o[r]:o[r]-e[r]}))},range:function(e){for(var t=[],n=0;n<e;n+=1)t.push(e);return t},remove:function(e,t){return e.filter((function(n,r){return!!t(n)&&(e.splice(r,1),!0)}))},clone:function(e){try{return JSON.parse(JSON.stringify(e,(function(e,t){return"function"==typeof t?t.toString():t})))}catch(t){return e}},getFirstDefined:function(){for(var e=0;e<arguments.length;e+=1)if(void 0!==(arguments.length<=e?void 0:arguments[e]))return arguments.length<=e?void 0:arguments[e]},sum:function(e){return e.reduce((function(e,t){return e+t}),0)},makeTemplateComponent:function(e,t){if(!t)throw new Error("No displayName found for template component:",e);var n=function(t){var n=t.children,r=t.className,o=S(t,["children","className"]);return y().createElement("div",x({className:C()(e,r)},o),n)};return n.displayName=t,n},groupBy:function(e,t){return e.reduce((function(e,n,r){var o="function"==typeof t?t(n,r):n[t];return e[o]=N(e[o])?e[o]:[],e[o].push(n),e}),{})},isArray:N,splitProps:function(e){return{className:e.className,style:e.style,rest:S(e,["className","style"])||{}}},compactObject:function(e){var t={};return e&&Object.keys(e).map((function(n){return Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&void 0!==e[n]&&(t[n]=e[n]),!0})),t},isSortingDesc:function(e){return!("desc"!==e.sort&&!0!==e.desc&&!1!==e.asc)},normalizeComponent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return z(e)?y().createElement(e,t):"function"==typeof e?e(t):n},asPx:function(e){return e=Number(e),Number.isNaN(e)?null:e+"px"}};function N(e){return Array.isArray(e)}function T(e){return O(e).join(".").replace(/\[/g,".").replace(/\]/g,"").split(".")}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(N(e))for(var n=0;n<e.length;n+=1)O(e[n],t);else t.push(e);return t}function z(e){return function(e){return"function"==typeof e&&!!Object.getPrototypeOf(e).isReactComponent}(e)||function(e){return"function"==typeof e&&String(e).includes(".createElement")}(e)}var F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var M=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L=function(e){return y().createElement("button",W({type:"button"},e,{className:"-btn"}),e.children)},K=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getSafePage=n.getSafePage.bind(n),n.changePage=n.changePage.bind(n),n.applyPage=n.applyPage.bind(n),n.state={page:e.page},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),I(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.page!==e.page&&this.setState({page:e.page})}},{key:"getSafePage",value:function(e){return Number.isNaN(e)&&(e=this.props.page),Math.min(Math.max(e,0),this.props.pages-1)}},{key:"changePage",value:function(e){e=this.getSafePage(e),this.setState({page:e}),this.props.page!==e&&this.props.onPageChange(e)}},{key:"applyPage",value:function(e){e&&e.preventDefault();var t=this.state.page;this.changePage(""===t?this.props.page:t)}},{key:"getPageJumpProperties",value:function(){var e=this;return{onKeyPress:function(t){13!==t.which&&13!==t.keyCode||e.applyPage()},onBlur:this.applyPage,value:""===this.state.page?"":this.state.page+1,onChange:function(t){var n=t.target.value,r=n-1;if(""===n)return e.setState({page:n});e.setState({page:e.getSafePage(r)})},inputType:""===this.state.page?"text":"number",pageJumpText:this.props.pageJumpText}}},{key:"render",value:function(){var e=this,t=this.props,n=t.pages,r=t.page,o=t.showPageSizeOptions,a=t.pageSizeOptions,s=t.pageSize,i=t.showPageJump,l=t.canPrevious,c=t.canNext,u=t.onPageSizeChange,d=t.className,p=t.PreviousComponent,m=t.NextComponent,h=t.renderPageJump,g=t.renderCurrentPage,f=t.renderTotalPagesCount,v=t.renderPageSizeOptions;return y().createElement("div",{className:C()(d,"-pagination"),style:this.props.style},y().createElement("div",{className:"-previous"},y().createElement(p,{onClick:function(){l&&e.changePage(r-1)},disabled:!l},this.props.previousText)),y().createElement("div",{className:"-center"},y().createElement("span",{className:"-pageInfo"},this.props.pageText," ",i?h(this.getPageJumpProperties()):g(r)," ",this.props.ofText," ",f(n)),o&&v({pageSize:s,rowsSelectorText:this.props.rowsSelectorText,pageSizeOptions:a,onPageSizeChange:u,rowsText:this.props.rowsText})),y().createElement("div",{className:"-next"},y().createElement(m,{onClick:function(){c&&e.changePage(r+1)},disabled:!c},this.props.nextText)))}}]),t}(v.Component);K.defaultProps={PreviousComponent:L,NextComponent:L,renderPageJump:function(e){var t=e.onChange,n=e.value,r=e.onBlur,o=e.onKeyPress,a=e.inputType,s=e.pageJumpText;return y().createElement("div",{className:"-pageJump"},y().createElement("input",{"aria-label":s,type:a,onChange:t,value:n,onBlur:r,onKeyPress:o}))},renderCurrentPage:function(e){return y().createElement("span",{className:"-currentPage"},e+1)},renderTotalPagesCount:function(e){return y().createElement("span",{className:"-totalPages"},e||1)},renderPageSizeOptions:function(e){var t=e.pageSize,n=e.pageSizeOptions,r=e.rowsSelectorText,o=e.onPageSizeChange,a=e.rowsText;return y().createElement("span",{className:"select-wrap -pageSizeOptions"},y().createElement("select",{"aria-label":r,onChange:function(e){return o(Number(e.target.value))},value:t},n.map((function(e,t){return y().createElement("option",{key:t,value:e},e+" "+a)}))))}};const V=K;var G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function U(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var q=function(){return{}};const J={data:[],resolveData:function(e){return e},loading:!1,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,showPageSizeOptions:!0,pageSizeOptions:[5,10,20,25,50,100],defaultPage:0,defaultPageSize:20,showPageJump:!0,collapseOnSortingChange:!0,collapseOnPageChange:!0,collapseOnDataChange:!0,freezeWhenExpanded:!1,sortable:!0,multiSort:!0,resizable:!0,filterable:!1,defaultSortDesc:!1,defaultSorted:[],defaultFiltered:[],defaultResized:[],defaultExpanded:{},defaultFilterMethod:function(e,t,n){var r=e.pivotId||e.id;return void 0===t[r]||String(t[r]).startsWith(e.value)},defaultSortMethod:function(e,t,n){return t=null==t?"":t,(e="string"==typeof(e=null==e?"":e)?e.toLowerCase():e)>(t="string"==typeof t?t.toLowerCase():t)?1:e<t?-1:0},onPageChange:void 0,onPageSizeChange:void 0,onSortedChange:void 0,onFilteredChange:void 0,onResizedChange:void 0,onExpandedChange:void 0,pivotBy:void 0,pivotValKey:"_pivotVal",pivotIDKey:"_pivotID",subRowsKey:"_subRows",aggregatedKey:"_aggregated",nestingLevelKey:"_nestingLevel",originalKey:"_original",indexKey:"_index",groupedByPivotKey:"_groupedByPivot",onFetchData:function(){return null},className:"",style:{},getProps:q,getTableProps:q,getTheadGroupProps:q,getTheadGroupTrProps:q,getTheadGroupThProps:q,getTheadProps:q,getTheadTrProps:q,getTheadThProps:q,getTheadFilterProps:q,getTheadFilterTrProps:q,getTheadFilterThProps:q,getTbodyProps:q,getTrGroupProps:q,getTrProps:q,getTdProps:q,getTfootProps:q,getTfootTrProps:q,getTfootTdProps:q,getPaginationProps:q,getLoadingProps:q,getNoDataProps:q,getResizerProps:q,column:{Cell:void 0,Header:void 0,Footer:void 0,Aggregated:void 0,Pivot:void 0,PivotValue:void 0,Expander:void 0,Filter:void 0,Placeholder:void 0,sortable:void 0,resizable:void 0,filterable:void 0,show:!0,minWidth:100,minResizeWidth:11,className:"",style:{},getProps:q,aggregate:void 0,headerClassName:"",headerStyle:{},getHeaderProps:q,footerClassName:"",footerStyle:{},getFooterProps:q,filterMethod:void 0,filterAll:!1,sortMethod:void 0},expanderDefaults:{sortable:!1,resizable:!1,filterable:!1,width:35},pivotDefaults:{},previousText:"Previous",nextText:"Next",loadingText:"Loading...",noDataText:"No rows found",pageText:"Page",ofText:"of",rowsText:"rows",pageJumpText:"jump to page",rowsSelectorText:"rows per page",TableComponent:function(e){var t=e.children,n=e.className,r=U(e,["children","className"]);return y().createElement("div",G({className:C()("rt-table",n),role:"grid"},r),t)},TheadComponent:k.makeTemplateComponent("rt-thead","Thead"),TbodyComponent:k.makeTemplateComponent("rt-tbody","Tbody"),TrGroupComponent:function(e){var t=e.children,n=e.className,r=U(e,["children","className"]);return y().createElement("div",G({className:C()("rt-tr-group",n),role:"rowgroup"},r),t)},TrComponent:function(e){var t=e.children,n=e.className,r=U(e,["children","className"]);return y().createElement("div",G({className:C()("rt-tr",n),role:"row"},r),t)},ThComponent:function(e){var t=e.toggleSort,n=e.className,r=e.children,o=U(e,["toggleSort","className","children"]);return y().createElement("div",G({className:C()("rt-th",n),onClick:function(e){return t&&t(e)},role:"columnheader",tabIndex:"-1"},o),r)},TdComponent:function(e){e.toggleSort;var t=e.className,n=e.children,r=U(e,["toggleSort","className","children"]);return y().createElement("div",G({className:C()("rt-td",t),role:"gridcell"},r),n)},TfootComponent:k.makeTemplateComponent("rt-tfoot","Tfoot"),FilterComponent:function(e){var t=e.filter,n=e.onChange,r=e.column;return y().createElement("input",{type:"text",style:{width:"100%"},placeholder:r.Placeholder,value:t?t.value:"",onChange:function(e){return n(e.target.value)}})},ExpanderComponent:function(e){var t=e.isExpanded;return y().createElement("div",{className:C()("rt-expander",t&&"-open")},"•")},PivotValueComponent:function(e){var t=e.subRows,n=e.value;return y().createElement("span",null,n," ",t&&"("+t.length+")")},AggregatedComponent:function(e){var t=e.subRows,n=e.column,r=t.filter((function(e){return void 0!==e[n.id]})).map((function(e,r){return y().createElement("span",{key:r},e[n.id],r<t.length-1?", ":"")}));return y().createElement("span",null,r)},PivotComponent:void 0,PaginationComponent:V,PreviousComponent:void 0,NextComponent:void 0,LoadingComponent:function(e){var t=e.className,n=e.loading,r=e.loadingText,o=U(e,["className","loading","loadingText"]);return y().createElement("div",G({className:C()("-loading",{"-active":n},t)},o),y().createElement("div",{className:"-loading-inner"},r))},NoDataComponent:k.makeTemplateComponent("rt-noData","NoData"),ResizerComponent:k.makeTemplateComponent("rt-resizer","Resizer"),PadRowComponent:function(){return y().createElement("span",null," ")}};var Y=d(3615),X=d.n(Y);const Q={data:X().any,loading:X().bool,showPagination:X().bool,showPaginationTop:X().bool,showPaginationBottom:X().bool,showPageSizeOptions:X().bool,pageSizeOptions:X().array,defaultPageSize:X().number,showPageJump:X().bool,collapseOnSortingChange:X().bool,collapseOnPageChange:X().bool,collapseOnDataChange:X().bool,freezeWhenExpanded:X().bool,sortable:X().bool,resizable:X().bool,filterable:X().bool,defaultSortDesc:X().bool,defaultSorted:X().array,defaultFiltered:X().array,defaultResized:X().array,defaultExpanded:X().object,defaultFilterMethod:X().func,defaultSortMethod:X().func,onPageChange:X().func,onPageSizeChange:X().func,onSortedChange:X().func,onFilteredChange:X().func,onResizedChange:X().func,onExpandedChange:X().func,pivotBy:X().array,pivotValKey:X().string,pivotIDKey:X().string,subRowsKey:X().string,aggregatedKey:X().string,nestingLevelKey:X().string,originalKey:X().string,indexKey:X().string,groupedByPivotKey:X().string,onFetchData:X().func,className:X().string,style:X().object,getProps:X().func,getTableProps:X().func,getTheadGroupProps:X().func,getTheadGroupTrProps:X().func,getTheadGroupThProps:X().func,getTheadProps:X().func,getTheadTrProps:X().func,getTheadThProps:X().func,getTheadFilterProps:X().func,getTheadFilterTrProps:X().func,getTheadFilterThProps:X().func,getTbodyProps:X().func,getTrGroupProps:X().func,getTrProps:X().func,getTdProps:X().func,getTfootProps:X().func,getTfootTrProps:X().func,getTfootTdProps:X().func,getPaginationProps:X().func,getLoadingProps:X().func,getNoDataProps:X().func,getResizerProps:X().func,columns:X().arrayOf(X().shape({Cell:X().oneOfType([X().element,X().string,X().func]),Header:X().oneOfType([X().element,X().string,X().func]),Footer:X().oneOfType([X().element,X().string,X().func]),Aggregated:X().oneOfType([X().element,X().string,X().func]),Pivot:X().oneOfType([X().element,X().string,X().func]),PivotValue:X().oneOfType([X().element,X().string,X().func]),Expander:X().oneOfType([X().element,X().string,X().func]),Filter:X().oneOfType([X().element,X().func]),sortable:X().bool,resizable:X().bool,filterable:X().bool,show:X().bool,minWidth:X().number,minResizeWidth:X().number,className:X().string,style:X().object,getProps:X().func,aggregate:X().func,headerClassName:X().string,headerStyle:X().object,getHeaderProps:X().func,footerClassName:X().string,footerStyle:X().object,getFooterProps:X().func,filterMethod:X().func,filterAll:X().bool,sortMethod:X().func})),expanderDefaults:X().shape({sortable:X().bool,resizable:X().bool,filterable:X().bool,width:X().number}),pivotDefaults:X().object,previousText:X().node,nextText:X().node,loadingText:X().node,noDataText:X().node,pageText:X().node,ofText:X().node,rowsText:X().node,pageJumpText:X().node,rowsSelectorText:X().node,TableComponent:X().elementType,TheadComponent:X().elementType,TbodyComponent:X().elementType,TrGroupComponent:X().elementType,TrComponent:X().elementType,ThComponent:X().elementType,TdComponent:X().elementType,TfootComponent:X().elementType,FilterComponent:X().elementType,ExpanderComponent:X().elementType,PivotValueComponent:X().elementType,AggregatedComponent:X().elementType,PivotComponent:X().elementType,PaginationComponent:X().elementType,PreviousComponent:X().elementType,NextComponent:X().elementType,LoadingComponent:X().elementType,NoDataComponent:X().elementType,ResizerComponent:X().elementType,PadRowComponent:X().elementType};var Z,ee=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ne=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),re=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getResolvedState=n.getResolvedState.bind(n),n.getDataModel=n.getDataModel.bind(n),n.getSortedData=n.getSortedData.bind(n),n.fireFetchData=n.fireFetchData.bind(n),n.getPropOrState=n.getPropOrState.bind(n),n.getStateOrProp=n.getStateOrProp.bind(n),n.filterData=n.filterData.bind(n),n.sortData=n.sortData.bind(n),n.getMinRows=n.getMinRows.bind(n),n.onPageChange=n.onPageChange.bind(n),n.onPageSizeChange=n.onPageSizeChange.bind(n),n.sortColumn=n.sortColumn.bind(n),n.filterColumn=n.filterColumn.bind(n),n.resizeColumnStart=n.resizeColumnStart.bind(n),n.resizeColumnEnd=n.resizeColumnEnd.bind(n),n.resizeColumnMoving=n.resizeColumnMoving.bind(n),n.state={page:e.defaultPage,pageSize:e.defaultPageSize,sorted:e.defaultSorted,expanded:e.defaultExpanded,filtered:e.defaultFiltered,resized:e.defaultResized,currentlyResizing:!1,skipNextSort:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ne(t,[{key:"render",value:function(){var e=this,t=this.getResolvedState(),n=t.children,r=t.className,o=t.style,a=t.getProps,s=t.getTableProps,i=t.getTheadGroupProps,l=t.getTheadGroupTrProps,c=t.getTheadGroupThProps,u=t.getTheadProps,d=t.getTheadTrProps,p=t.getTheadThProps,m=t.getTheadFilterProps,h=t.getTheadFilterTrProps,g=t.getTheadFilterThProps,f=t.getTbodyProps,v=t.getTrGroupProps,b=t.getTrProps,E=t.getTdProps,w=t.getTfootProps,P=t.getTfootTrProps,x=t.getTfootTdProps,S=t.getPaginationProps,N=t.getLoadingProps,T=t.getNoDataProps,O=t.getResizerProps,z=t.showPagination,F=t.showPaginationTop,D=t.showPaginationBottom,R=t.manual,M=t.loadingText,H=t.noDataText,j=t.sortable,A=t.multiSort,$=t.resizable,B=t.filterable,_=t.pivotIDKey,I=t.pivotValKey,W=t.pivotBy,L=t.subRowsKey,K=t.aggregatedKey,V=t.originalKey,G=t.indexKey,U=t.groupedByPivotKey,q=t.loading,Y=t.pageSize,X=t.page,Q=t.sorted,Z=t.filtered,ne=t.resized,re=t.expanded,oe=t.pages,ae=t.onExpandedChange,se=t.TableComponent,ie=t.TheadComponent,le=t.TbodyComponent,ce=t.TrGroupComponent,ue=t.TrComponent,de=t.ThComponent,pe=t.TdComponent,me=t.TfootComponent,he=t.PaginationComponent,ge=t.LoadingComponent,fe=t.SubComponent,ve=t.NoDataComponent,ye=t.ResizerComponent,be=t.ExpanderComponent,Ee=t.PivotValueComponent,we=t.PivotComponent,Pe=t.AggregatedComponent,Ce=t.FilterComponent,xe=t.PadRowComponent,Se=t.resolvedData,ke=t.allVisibleColumns,Ne=t.headerGroups,Te=t.hasHeaderGroups,Oe=t.sortedData,ze=t.currentlyResizing,Fe=Y*X,De=Fe+Y,Re=R?Se:Oe.slice(Fe,De),Me=this.getMinRows(),He=k.range(Math.max(Me-Re.length,0)),je=ke.some((function(e){return e.Footer})),Ae=B||ke.some((function(e){return e.filterable})),$e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return[t.map((function(t,o){var a=te({},t,{_viewIndex:r+=1}),s=n.concat([o]);if(a[L]&&k.get(re,s)){var i=e(a[L],s,r),l=ee(i,2);a[L]=l[0],r=l[1]}return a})),r]}(Re),Be=ee($e,1);Re=Be[0];var _e=X>0,Ie=X+1<oe,We=k.sum(ke.map((function(e){var t=ne.find((function(t){return t.id===e.id}))||{};return k.getFirstDefined(t.value,e.width,e.minWidth)}))),Le=-1,Ke=te({},t,{startRow:Fe,endRow:De,pageRows:Re,minRows:Me,padRows:He,hasColumnFooter:je,canPrevious:_e,canNext:Ie,rowMinWidth:We}),Ve=k.splitProps(a(Ke,void 0,void 0,this)),Ge=k.splitProps(s(Ke,void 0,void 0,this)),Ue=k.splitProps(f(Ke,void 0,void 0,this)),qe=N(Ke,void 0,void 0,this),Je=T(Ke,void 0,void 0,this),Ye=function(t,n){var r=function(e){return(ne.find((function(t){return t.id===e.id}))||{}).value},o=k.sum(t.columns.map((function(e){return e.width||r(e)?0:e.minWidth}))),a=k.sum(t.columns.map((function(e){return k.getFirstDefined(r(e),e.width,e.minWidth)}))),s=k.sum(t.columns.map((function(e){return k.getFirstDefined(r(e),e.width,e.maxWidth)}))),i=k.splitProps(c(Ke,void 0,t,e)),l=k.splitProps(t.getHeaderProps(Ke,void 0,t,e)),u=[t.headerClassName,i.className,l.className],d=te({},t.headerStyle,i.style,l.style),p=te({},i.rest,l.rest),m={flex:o+" 0 auto",width:k.asPx(a),maxWidth:k.asPx(s)};return y().createElement(de,te({key:n+"-"+t.id,className:C()(u),style:te({},d,m)},p),k.normalizeComponent(t.Header,{data:Oe,column:t}))},Xe=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},o=Q.find((function(e){return e.id===t.id})),a="function"==typeof t.show?t.show():t.show,s=k.getFirstDefined(r.value,t.width,t.minWidth),i=k.getFirstDefined(r.value,t.width,t.maxWidth),l=k.splitProps(p(Ke,void 0,t,e)),c=k.splitProps(t.getHeaderProps(Ke,void 0,t,e)),u=[t.headerClassName,l.className,c.className],d=te({},t.headerStyle,l.style,c.style),m=te({},l.rest,c.rest),h=k.getFirstDefined(t.resizable,$,!1),g=h?y().createElement(ye,te({onMouseDown:function(n){return e.resizeColumnStart(n,t,!1)},onTouchStart:function(n){return e.resizeColumnStart(n,t,!0)}},O("finalState",void 0,t,e))):null,f=k.getFirstDefined(t.sortable,j,!1);return y().createElement(de,te({key:n+"-"+t.id,className:C()(u,h&&"rt-resizable-header",o?o.desc?"-sort-desc":"-sort-asc":"",f&&"-cursor-pointer",!a&&"-hidden",W&&W.slice(0,-1).includes(t.id)&&"rt-header-pivot"),style:te({},d,{flex:s+" 0 auto",width:k.asPx(s),maxWidth:k.asPx(i)}),toggleSort:function(n){f&&e.sortColumn(t,!!A&&n.shiftKey)}},m),y().createElement("div",{className:C()(h&&"rt-resizable-header-content")},k.normalizeComponent(t.Header,{data:Oe,column:t})),g)},Qe=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},o=k.getFirstDefined(r.value,t.width,t.minWidth),a=k.getFirstDefined(r.value,t.width,t.maxWidth),s=k.splitProps(g(Ke,void 0,t,e)),i=k.splitProps(t.getHeaderProps(Ke,void 0,t,e)),l=[t.headerClassName,s.className,i.className],c=te({},t.headerStyle,s.style,i.style),u=te({},s.rest,i.rest),d=Z.find((function(e){return e.id===t.id})),p=t.Filter||Ce,m=k.getFirstDefined(t.filterable,B,!1);return y().createElement(de,te({key:n+"-"+t.id,className:C()(l),style:te({},c,{flex:o+" 0 auto",width:k.asPx(o),maxWidth:k.asPx(a)})},u),m?k.normalizeComponent(p,{column:t,filter:d,onChange:function(n){return e.filterColumn(t,n)}},J.column.Filter):null)},Ze=function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a={original:n[V],row:n,index:n[G],viewIndex:Le+=1,pageSize:Y,page:X,level:o.length,nestingPath:o.concat([r]),aggregated:n[K],groupedByPivot:n[U],subRows:n[L]},s=k.get(re,a.nestingPath),i=v(Ke,a,void 0,e),l=k.splitProps(b(Ke,a,void 0,e));return y().createElement(ce,te({key:a.nestingPath.join("_")},i),y().createElement(ue,te({className:C()(l.className,n._viewIndex%2?"-even":"-odd"),style:l.style},l.rest),ke.map((function(t,r){var o=ne.find((function(e){return e.id===t.id}))||{},i="function"==typeof t.show?t.show():t.show,l=k.getFirstDefined(o.value,t.width,t.minWidth),c=k.getFirstDefined(o.value,t.width,t.maxWidth),u=k.splitProps(E(Ke,a,t,e)),d=k.splitProps(t.getProps(Ke,a,t,e)),p=[u.className,t.className,d.className],m=te({},u.style,t.style,d.style),h=te({},a,{isExpanded:s,column:te({},t),value:a.row[t.id],pivoted:t.pivoted,expander:t.expander,resized:ne,show:i,width:l,maxWidth:c,tdProps:u,columnProps:d,classes:p,styles:m}),g=h.value,f=void 0,v=void 0,b=void 0,w=k.normalizeComponent(t.Cell,h,g),P=t.Aggregated||(t.aggregate?t.Cell:Pe),x=t.Expander||be,S=t.PivotValue||Ee,N=we||function(e){return y().createElement("div",null,y().createElement(x,e),y().createElement(S,e))},T=t.Pivot||N;(h.pivoted||h.expander)&&(h.expandable=!0,f=!0,!h.pivoted||h.subRows||fe||(h.expandable=!1)),h.pivoted?(v=a.row[_]===t.id&&h.subRows,b=W.indexOf(t.id)>W.indexOf(a.row[_])&&h.subRows,w=v?k.normalizeComponent(T,te({},h,{value:n[I]}),n[I]):b?k.normalizeComponent(P,h,g):null):h.aggregated&&(w=k.normalizeComponent(P,h,g)),h.expander&&(w=k.normalizeComponent(x,h,n[I]),W&&(h.groupedByPivot&&(w=null),h.subRows||fe||(w=null)));var O=f?function(t){var n=k.clone(re);return n=s?k.set(n,h.nestingPath,!1):k.set(n,h.nestingPath,{}),e.setStateWithData({expanded:n},(function(){return ae&&ae(n,h.nestingPath,t,h)}))}:function(){},z={onClick:O};return u.rest.onClick&&(z.onClick=function(e){u.rest.onClick(e,(function(){return O(e)}))}),d.rest.onClick&&(z.onClick=function(e){d.rest.onClick(e,(function(){return O(e)}))}),y().createElement(pe,te({key:r+"-"+t.id,className:C()(p,!h.expandable&&!i&&"hidden",h.expandable&&"rt-expandable",(v||b)&&"rt-pivot"),style:te({},m,{flex:l+" 0 auto",width:k.asPx(l),maxWidth:k.asPx(c)})},u.rest,d.rest,z),w)}))),a.subRows&&s&&a.subRows.map((function(e,n){return t(e,n,a.nestingPath)})),fe&&!a.subRows&&s&&fe(a,(function(){var e=k.clone(re);k.set(e,a.nestingPath,!1)})))},et=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},o="function"==typeof t.show?t.show():t.show,a=k.getFirstDefined(r.value,t.width,t.minWidth),s=a,i=k.getFirstDefined(r.value,t.width,t.maxWidth),l=k.splitProps(E(Ke,void 0,t,e)),c=k.splitProps(t.getProps(Ke,void 0,t,e)),u=[l.className,t.className,c.className],d=te({},l.style,t.style,c.style);return y().createElement(pe,te({key:n+"-"+t.id,className:C()(u,!o&&"hidden"),style:te({},d,{flex:s+" 0 auto",width:k.asPx(a),maxWidth:k.asPx(i)})},l.rest),k.normalizeComponent(xe))},tt=function(t,n){var r=v(Ke,void 0,void 0,e),o=k.splitProps(b(Ke,void 0,void 0,e));return y().createElement(ce,te({key:"pad-"+n},r),y().createElement(ue,{className:C()("-padRow",(Re.length+n)%2?"-even":"-odd",o.className),style:o.style||{}},ke.map(et)))},nt=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},o="function"==typeof t.show?t.show():t.show,a=k.getFirstDefined(r.value,t.width,t.minWidth),s=k.getFirstDefined(r.value,t.width,t.maxWidth),i=k.splitProps(x(Ke,void 0,t,e)),l=k.splitProps(t.getProps(Ke,void 0,t,e)),c=k.splitProps(t.getFooterProps(Ke,void 0,t,e)),u=[i.className,t.className,l.className,c.className],d=te({},i.style,t.style,l.style,c.style);return y().createElement(pe,te({key:n+"-"+t.id,className:C()(u,!o&&"hidden"),style:te({},d,{flex:a+" 0 auto",width:k.asPx(a),maxWidth:k.asPx(s)})},l.rest,i.rest,c.rest),k.normalizeComponent(t.Footer,{data:Oe,column:t}))},rt=function(n){var r=k.splitProps(S(Ke,void 0,void 0,e));return y().createElement(he,te({},t,{pages:oe,canPrevious:_e,canNext:Ie,onPageChange:e.onPageChange,onPageSizeChange:e.onPageSizeChange,className:r.className,style:r.style,isTop:n},r.rest))},ot=function(){return y().createElement("div",te({className:C()("ReactTable",r,Ve.className),style:te({},o,Ve.style)},Ve.rest),z&&F?y().createElement("div",{className:"pagination-top"},rt(!0)):null,y().createElement(se,te({className:C()(Ge.className,ze?"rt-resizing":""),style:Ge.style},Ge.rest),Te?(g=k.splitProps(i(Ke,void 0,void 0,e)),f=k.splitProps(l(Ke,void 0,void 0,e)),y().createElement(ie,te({className:C()("-headerGroups",g.className),style:te({},g.style,{minWidth:We+"px"})},g.rest),y().createElement(ue,te({className:f.className,style:f.style},f.rest),Ne.map(Ye)))):null,(c=k.splitProps(u(Ke,void 0,void 0,e)),p=k.splitProps(d(Ke,void 0,void 0,e)),y().createElement(ie,te({className:C()("-header",c.className),style:te({},c.style,{minWidth:We+"px"})},c.rest),y().createElement(ue,te({className:p.className,style:p.style},p.rest),ke.map(Xe)))),Ae?(a=k.splitProps(m(Ke,void 0,void 0,e)),s=k.splitProps(h(Ke,void 0,void 0,e)),y().createElement(ie,te({className:C()("-filters",a.className),style:te({},a.style,{minWidth:We+"px"})},a.rest),y().createElement(ue,te({className:s.className,style:s.style},s.rest),ke.map(Qe)))):null,y().createElement(le,te({className:C()(Ue.className),style:te({},Ue.style,{minWidth:We+"px"})},Ue.rest),Re.map((function(e,t){return Ze(e,t)})),He.map(tt)),je?(t=k.splitProps(w(Ke,void 0,void 0,e)),n=k.splitProps(P(Ke,void 0,void 0,e)),y().createElement(me,te({className:t.className,style:te({},t.style,{minWidth:We+"px"})},t.rest),y().createElement(ue,te({className:C()(n.className),style:n.style},n.rest),ke.map(nt)))):null),z&&D?y().createElement("div",{className:"pagination-bottom"},rt(!1)):null,!Re.length&&y().createElement(ve,Je,k.normalizeComponent(H)),y().createElement(ge,te({loading:q,loadingText:M},qe)));var t,n,a,s,c,p,g,f};return n?n(Ke,ot,this):ot()}}]),t}((Z=function(e){function t(){return D(this,t),R(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),F(t,[{key:"UNSAFE_componentWillMount",value:function(){this.setStateWithData(this.getDataModel(this.getResolvedState(),!0))}},{key:"componentDidMount",value:function(){this.fireFetchData()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){var n=this.getResolvedState(),r=this.getResolvedState(e,t);["sorted","filtered","resized","expanded"].forEach((function(e){var t="default"+(e.charAt(0).toUpperCase()+e.slice(1));JSON.stringify(n[t])!==JSON.stringify(r[t])&&(r[e]=r[t])})),["sortable","filterable","resizable"].forEach((function(e){if(n[e]!==r[e]){var t=e.replace("able","")+"ed",o="default"+(t.charAt(0).toUpperCase()+t.slice(1));r[t]=r[o]}})),n.data===r.data&&n.columns===r.columns&&n.pivotBy===r.pivotBy&&n.sorted===r.sorted&&n.filtered===r.filtered||this.setStateWithData(this.getDataModel(r,n.data!==r.data))}},{key:"setStateWithData",value:function(e,t){var n=this,r=this.getResolvedState(),o=this.getResolvedState({},e),a=o.freezeWhenExpanded;if(o.frozen=!1,a)for(var s=Object.keys(o.expanded),i=0;i<s.length;i+=1)if(o.expanded[s[i]]){o.frozen=!0;break}return(r.frozen&&!o.frozen||r.sorted!==o.sorted||r.filtered!==o.filtered||r.showFilters!==o.showFilters||!o.frozen&&r.resolvedData!==o.resolvedData)&&((r.sorted!==o.sorted&&this.props.collapseOnSortingChange||r.filtered!==o.filtered||r.showFilters!==o.showFilters||r.sortedData&&!o.frozen&&r.resolvedData!==o.resolvedData&&this.props.collapseOnDataChange)&&(o.expanded={}),Object.assign(o,this.getSortedData(o))),r.filtered!==o.filtered&&(o.page=0),o.sortedData&&(o.pages=o.manual?o.pages:Math.ceil(o.sortedData.length/o.pageSize),o.page=o.manual?o.page:Math.max(o.page>=o.pages?o.pages-1:o.page,0)),this.setState(o,(function(){t&&t(),r.page===o.page&&r.pageSize===o.pageSize&&r.sorted===o.sorted&&r.filtered===o.filtered||n.fireFetchData()}))}}]),t}(v.Component),function(e){function t(){return B(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),j(t,[{key:"getResolvedState",value:function(e,t){return H({},k.compactObject(this.state),k.compactObject(this.props),k.compactObject(t),k.compactObject(e))}},{key:"getDataModel",value:function(e,t){var n=this,r=e.columns,o=e.pivotBy,a=void 0===o?[]:o,s=e.data,i=e.resolveData,l=e.pivotIDKey,c=e.pivotValKey,u=e.subRowsKey,d=e.aggregatedKey,p=e.nestingLevelKey,m=e.originalKey,h=e.indexKey,g=e.groupedByPivotKey,f=e.SubComponent,v=!1;r.forEach((function(e){e.columns&&(v=!0)}));var b=[].concat($(r)),E=r.find((function(e){return e.expander||e.columns&&e.columns.some((function(e){return e.expander}))}));E&&!E.expander&&(E=E.columns.find((function(e){return e.expander}))),f&&!E&&(b=[E={expander:!0}].concat($(b)));var w=[],P=function(e,t){var r=function(e,t){var r=void 0;if((r=e.expander?H({},n.props.column,n.props.expanderDefaults,e):H({},n.props.column,e)).maxWidth<r.minWidth&&(r.minWidth=r.maxWidth),t&&(r.parentColumn=t),"string"==typeof r.accessor){r.id=r.id||r.accessor;var o=r.accessor;return r.accessor=function(e){return k.get(e,o)},r}if(r.accessor&&!r.id)throw console.warn(r),new Error("A column id is required if using a non-string accessor for column above.");return r.accessor||(r.accessor=function(){}),r}(e,t);return w.push(r),r},C=b.map((function(e){return e.columns?H({},e,{columns:e.columns.map((function(t){return P(t,e)}))}):P(e)})).slice(),x=[],S=(C=(C=C.map((function(e){if(e.columns){var t=e.columns.filter((function(e){return!(a.indexOf(e.id)>-1)&&k.getFirstDefined(e.show,!0)}));return H({},e,{columns:t})}return e}))).filter((function(e){return e.columns?e.columns.length:!(a.indexOf(e.id)>-1)&&k.getFirstDefined(e.show,!0)}))).findIndex((function(e){return e.pivot}));if(a.length){var N=[];a.forEach((function(e){var t=w.find((function(t){return t.id===e}));t&&N.push(t)}));var T=N.reduce((function(e,t){return e&&e===t.parentColumn&&t.parentColumn}),N[0].parentColumn),O=v&&T.Header,z={Header:O=O||function(){return y().createElement("strong",null,"Pivoted")},columns:N.map((function(e){return H({},n.props.pivotDefaults,e,{pivoted:!0})}))};S>=0?(z=H({},C[S],z),C.splice(S,1,z)):C.unshift(z)}var F=[],D=[],R=function(e,t){F.push(H({},n.props.column,t,{columns:e})),D=[]};C.forEach((function(e){if(e.columns)return x=x.concat(e.columns),D.length>0&&R(D),void R(e.columns,e);x.push(e),D.push(e)})),v&&D.length>0&&R(D);var j=function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=(A(r={},m,t),A(r,h,n),A(r,u,t[u]),A(r,p,o),r);return w.forEach((function(e){e.expander||(a[e.id]=e.accessor(t))})),a[u]&&(a[u]=a[u].map((function(t,n){return e(t,n,o+1)}))),a},B=this.resolvedData;this.resolvedData&&!t||(B=i(s),this.resolvedData=B),B=B.map((function(e,t){return j(e,t)}));var _=x.filter((function(e){return!e.expander&&e.aggregate})),I=function(e){var t={};return _.forEach((function(n){var r=e.map((function(e){return e[n.id]}));t[n.id]=n.aggregate(r,e)})),t};return a.length&&(B=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r===n.length)return t;var o=Object.entries(k.groupBy(t,n[r])).map((function(e){var t,o=M(e,2),a=o[0],s=o[1];return A(t={},l,n[r]),A(t,c,a),A(t,n[r],a),A(t,u,s),A(t,p,r),A(t,g,!0),t}));return o.map((function(t){var o,a=e(t[u],n,r+1);return H({},t,(A(o={},u,a),A(o,d,!0),o),I(a))}))}(B,a)),H({},e,{resolvedData:B,allVisibleColumns:x,headerGroups:F,allDecoratedColumns:w,hasHeaderGroups:v})}},{key:"getSortedData",value:function(e){var t=e.manual,n=e.sorted,r=e.filtered,o=e.defaultFilterMethod,a=e.resolvedData,s=e.allDecoratedColumns,i={};return s.filter((function(e){return e.sortMethod})).forEach((function(e){i[e.id]=e.sortMethod})),{sortedData:t?a:this.sortData(this.filterData(a,r,o,s),n,i)}}},{key:"fireFetchData",value:function(){var e=H({},this.getResolvedState(),{page:this.getStateOrProp("page"),pageSize:this.getStateOrProp("pageSize"),filtered:this.getStateOrProp("filtered")});this.props.onFetchData(e,this)}},{key:"getPropOrState",value:function(e){return k.getFirstDefined(this.props[e],this.state[e])}},{key:"getStateOrProp",value:function(e){return k.getFirstDefined(this.state[e],this.props[e])}},{key:"filterData",value:function(e,t,n,r){var o=this,a=e;return t.length&&(a=(a=t.reduce((function(e,t){var o=r.find((function(e){return e.id===t.id}));if(!o||!1===o.filterable)return e;var a=o.filterMethod||n;return o.filterAll?a(t,e,o):e.filter((function(e){return a(t,e,o)}))}),a)).map((function(e){return e[o.props.subRowsKey]?H({},e,A({},o.props.subRowsKey,o.filterData(e[o.props.subRowsKey],t,n,r))):e})).filter((function(e){return!e[o.props.subRowsKey]||e[o.props.subRowsKey].length>0}))),a}},{key:"sortData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return e;var o=(this.props.orderByMethod||k.orderBy)(e,t.map((function(e){return r[e.id]?function(t,n){return r[e.id](t[e.id],n[e.id],e.desc)}:function(t,r){return n.props.defaultSortMethod(t[e.id],r[e.id],e.desc)}})),t.map((function(e){return!e.desc})),this.props.indexKey);return o.forEach((function(e){e[n.props.subRowsKey]&&(e[n.props.subRowsKey]=n.sortData(e[n.props.subRowsKey],t,r))})),o}},{key:"getMinRows",value:function(){return k.getFirstDefined(this.props.minRows,this.getStateOrProp("pageSize"))}},{key:"onPageChange",value:function(e){var t=this.props,n=t.onPageChange,r=t.collapseOnPageChange,o={page:e};r&&(o.expanded={}),this.setStateWithData(o,(function(){return n&&n(e)}))}},{key:"onPageSizeChange",value:function(e){var t=this.props.onPageSizeChange,n=this.getResolvedState(),r=n.pageSize*n.page,o=Math.floor(r/e);this.setStateWithData({pageSize:e,page:o},(function(){return t&&t(e,o)}))}},{key:"sortColumn",value:function(e,t){var n=this.getResolvedState(),r=n.sorted,o=n.skipNextSort,a=n.defaultSortDesc,s=Object.prototype.hasOwnProperty.call(e,"defaultSortDesc")?e.defaultSortDesc:a,i=!s;if(o)this.setStateWithData({skipNextSort:!1});else{var l=this.props.onSortedChange,c=k.clone(r||[]).map((function(e){return e.desc=k.isSortingDesc(e),e}));if(k.isArray(e)){var u=c.findIndex((function(t){return t.id===e[0].id}));u>-1?(c[u].desc===i?t?c.splice(u,e.length):e.forEach((function(e,t){c[u+t].desc=s})):e.forEach((function(e,t){c[u+t].desc=i})),t||(c=c.slice(u,e.length))):c=t?c.concat(e.map((function(e){return{id:e.id,desc:s}}))):e.map((function(e){return{id:e.id,desc:s}}))}else{var d=c.findIndex((function(t){return t.id===e.id}));if(d>-1){var p=c[d];p.desc===i?t?c.splice(d,1):(p.desc=s,c=[p]):(p.desc=i,t||(c=[p]))}else t?c.push({id:e.id,desc:s}):c=[{id:e.id,desc:s}]}this.setStateWithData({page:!r.length&&c.length||!t?0:this.state.page,sorted:c},(function(){return l&&l(c,e,t)}))}}},{key:"filterColumn",value:function(e,t){var n=this.getResolvedState().filtered,r=this.props.onFilteredChange,o=(n||[]).filter((function(t){return t.id!==e.id}));""!==t&&o.push({id:e.id,value:t}),this.setStateWithData({filtered:o},(function(){return r&&r(o,e,t)}))}},{key:"resizeColumnStart",value:function(e,t,n){var r=this;e.stopPropagation();var o,a=e.target.parentElement.getBoundingClientRect().width;o=n?e.changedTouches[0].pageX:e.pageX,this.trapEvents=!0,this.setStateWithData({currentlyResizing:{id:t.id,startX:o,parentWidth:a}},(function(){n?(document.addEventListener("touchmove",r.resizeColumnMoving),document.addEventListener("touchcancel",r.resizeColumnEnd),document.addEventListener("touchend",r.resizeColumnEnd)):(document.addEventListener("mousemove",r.resizeColumnMoving),document.addEventListener("mouseup",r.resizeColumnEnd),document.addEventListener("mouseleave",r.resizeColumnEnd))}))}},{key:"resizeColumnMoving",value:function(e){e.stopPropagation();var t=this.props,n=t.onResizedChange,r=t.column,o=this.getResolvedState(),a=o.resized,s=o.currentlyResizing,i=o.columns.find((function(e){return e.accessor===s.id||e.id===s.id})),l=i&&null!=i.minResizeWidth?i.minResizeWidth:r.minResizeWidth,c=a.filter((function(e){return e.id!==s.id})),u=void 0;"touchmove"===e.type?u=e.changedTouches[0].pageX:"mousemove"===e.type&&(u=e.pageX);var d=Math.max(s.parentWidth+u-s.startX,l);c.push({id:s.id,value:d}),this.setStateWithData({resized:c},(function(){return n&&n(c,e)}))}},{key:"resizeColumnEnd",value:function(e){e.stopPropagation();var t="touchend"===e.type||"touchcancel"===e.type;t&&(document.removeEventListener("touchmove",this.resizeColumnMoving),document.removeEventListener("touchcancel",this.resizeColumnEnd),document.removeEventListener("touchend",this.resizeColumnEnd)),document.removeEventListener("mousemove",this.resizeColumnMoving),document.removeEventListener("mouseup",this.resizeColumnEnd),document.removeEventListener("mouseleave",this.resizeColumnEnd),t||this.setStateWithData({skipNextSort:!0,currentlyResizing:!1})}}]),t}(Z)));re.propTypes=Q,re.defaultProps=J;const oe=re;var ae=d(7388);const se=["#E24D42","#1F78C1","#BA43A9","#705DA0","#466803","#508642","#447EBC","#C15C17","#890F02","#757575","#0A437C","#6D1F62","#584477","#629E51","#2F4F4F","#BF1B00","#806EB7","#8a2eb8","#699e00","#000000","#3F6833","#2F575E","#99440A","#E0752D","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],ie=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"],le=/^https?:\/\/.+/,ce=({tag:e,datasource:t,highlight:n,onClick:r})=>{const o=(0,ae.useStyles2)(ue),a=function(e){const t=function(e){let t=5381;for(let n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n);return t}(e.toLowerCase());return{color:se[Math.abs(t%se.length)],borderColor:ie[Math.abs(t%ie.length)]}}(e.tag),s={background:a.color,borderColor:a.borderColor},i=le.test(e.value);let l=y().createElement(y().Fragment,null,e.value?`${e.tag}: ${e.value}`:`${e.tag}`);return i&&(l=y().createElement(ae.Tooltip,{placement:"top",content:e.value},y().createElement("a",{href:e.value,target:"_blank",rel:"noreferrer"},y().createElement(ae.Icon,{name:"link",className:o.icon}),e.tag))),y().createElement("span",{className:"label label-tag zbx-tag "+(n?"highlighted":""),style:s,onClick:n=>{r&&r(e,t,n.ctrlKey,n.shiftKey)}},l)},ue=e=>({icon:w.css`
    margin-right: ${e.spacing(.5)};
  `}),de=({status:e,className:t})=>{const n=(0,w.cx)(t,"icon-gf",{"icon-gf-critical":"critical"===e||"problem"===e||"warning"===e},{"icon-gf-online":"online"===e||"ok"===e});return y().createElement("i",{className:n})},pe=({icon:e,customClass:t})=>{const n=(0,w.cx)(t,"fa-icon-container");return y().createElement("span",{className:n},y().createElement("i",{className:`fa fa-${e}`}))},me=pe,he=({icon:e,width:t,tooltip:n,className:r,children:o,onClick:a})=>{const s=(0,ae.useTheme)(),i=ge(s),l=(0,w.cx)("btn",i.button,w.css`width: ${t||3}rem`,r);let c=y().createElement("button",{className:l,onClick:a},e&&y().createElement(pe,{icon:e,customClass:i.icon}),o);return n&&(c=y().createElement(ae.Tooltip,{placement:"bottom",content:n},c)),c},ge=(0,ae.stylesFactory)((e=>{const t=e.type===s.GrafanaThemeType.Light?"#497dc0":"#005f81",n=e.type===s.GrafanaThemeType.Light?"#456ba4":"#354f77";return{button:w.css`
      height: 2rem;
      background-image: none;
      background-color: ${t};
      border: 1px solid ${e.palette.gray1};
      border-radius: 1px;
      color: ${e.colors.text};

      i {
        vertical-align: middle;
      }

      &:hover {
        background-color: ${n};
      }
    `,icon:w.css`
      i {
        color: ${e.colors.text};
      }
    `}})),fe=({className:e,onClick:t})=>y().createElement(he,{className:e,icon:"reply-all",tooltip:"Acknowledge problem",onClick:t}),ve=({problem:e,panelId:t,range:n})=>y().createElement(he,{icon:"compass",width:6,onClick:()=>ye(e,t,n)},"Explore"),ye=(e,t,n)=>{var r,o;let a={};if(1===(null===(r=e.items)||void 0===r?void 0:r.length)&&1===(null===(o=e.hosts)||void 0===o?void 0:o.length)){const t=e.items[0],n=e.hosts[0],r=h(t.name,t.key_);a={queryType:"0",group:{filter:"/.*/"},application:{filter:""},host:{filter:n.name},item:{filter:r}}}else{var i;a={queryType:"3",itemids:null===(i=e.items)||void 0===i?void 0:i.map((e=>e.itemid)).join(",")}}const l={datasource:e.datasource,context:"explore",originPanelId:t,range:n.raw,queries:[a]},c=JSON.stringify(l),u=s.urlUtil.renderUrl("/explore",{left:c});b.locationService.push(u)},be=({className:e,onClick:t})=>y().createElement(he,{className:e,icon:"terminal",tooltip:"Execute script",onClick:t});var Ee=d(2729),we=d.n(Ee);function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pe(e,t,n[t])}))}return e}const xe=y().createContext(b.config),Se=xe.Consumer,ke=({children:e})=>y().createElement(Se,null,(t=>y().createElement(ae.ThemeContext.Provider,{value:(0,s.createTheme)({colors:{mode:b.config.bootData.user.lightTheme?"light":"dark"}})},e)));class Ne extends y().Component{renderModal(){const{component:e,props:t}=this.state;if(!e)return null;this.modalRoot.appendChild(this.modalNode);const n=y().createElement((e=>(e=>t=>y().createElement(xe.Provider,{value:b.config},y().createElement(e,Ce({},t))))((t=>y().createElement(ke,null,y().createElement(e,Ce({},t))))))(e),t);return we().createPortal(n,this.modalNode)}render(){const{children:e}=this.props,t=e;return y().createElement(y().Fragment,null,y().createElement(t,{showModal:this.showModal,hideModal:this.hideModal}),this.renderModal())}constructor(e){super(e),this.modalRoot=document.body,this.modalNode=document.createElement("div"),this.showModal=(e,t)=>{this.setState({component:e,props:t})},this.hideModal=()=>{this.modalRoot.removeChild(this.modalNode),this.setState({component:null,props:{}})},this.state={component:null,props:{}}}}y().forwardRef((({data:e,isFocused:t,disabled:n,onClick:r,hideDescription:o},a)=>{const s=(0,ae.useTheme2)(),i=(0,ae.getSelectStyles)(s),l=(0,ae.useStyles2)(Te()),c=(0,w.cx)(i.option,l.menuOptionWrapper,t&&i.optionFocused,n&&l.menuOptionDisabled);return y().createElement("div",{ref:a,className:c,"aria-label":"Menu option",onClick:t=>{n||(t.preventDefault(),t.stopPropagation(),r(e))}},y().createElement("div",{className:(0,w.cx)(i.optionBody,l.menuOptionBody)},y().createElement("span",null,e.label||e.value),!o&&e.description&&y().createElement("div",{className:i.optionDescription},e.description)),e.description&&y().createElement(ae.Tooltip,{content:e.description},y().createElement(ae.Icon,{name:"info-circle",className:l.menuOptionInfoSign})))})).displayName="MenuOption";const Te=e=>t=>({menuWrapper:w.css`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${t.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:w.css`
      min-width: ${t.spacing(e||0)};

      & > div {
        padding-top: ${t.spacing(1)};
      }
    `,menuLeft:w.css`
      right: 0;
      flex-direction: row-reverse;
    `,container:w.css`
      padding: ${t.spacing(1)};
      border: 1px ${t.colors.border.weak} solid;
      border-radius: ${t.shape.borderRadius(1)};
      background-color: ${t.colors.background.primary};
      z-index: ${t.zIndex.modal};
    `,menuOptionWrapper:w.css`
      padding: ${t.spacing(.5)};
    `,menuOptionBody:w.css`
      font-weight: ${t.typography.fontWeightRegular};
      padding: ${t.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:w.css`
      color: ${t.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionInfoSign:w.css`
      color: ${t.colors.text.disabled};
    `}),Oe=[{value:0,label:"Not classified"},{value:1,label:"Information"},{value:2,label:"Warning"},{value:3,label:"Average"},{value:4,label:"High"},{value:5,label:"Disaster"}];class ze extends v.PureComponent{renderActions(){const{canClose:e}=this.props;return[y().createElement(ae.Checkbox,{key:"ack",label:"Acknowledge",value:this.state.acknowledge,onChange:this.onAcknowledgeToggle}),y().createElement(ae.Checkbox,{key:"change-severity",label:"Change severity",description:"",value:this.state.changeSeverity,onChange:this.onChangeSeverityToggle}),this.state.changeSeverity&&y().createElement(ae.RadioButtonGroup,{key:"severity",size:"sm",options:Oe,value:this.state.selectedSeverity,onChange:this.onChangeSelectedSeverity}),e&&y().createElement(ae.Checkbox,{key:"close",label:"Close problem",disabled:!e,value:this.state.closeProblem,onChange:this.onCloseProblemToggle})].filter((e=>e))}render(){const{theme:e}=this.props,t=Fe(e),n=(0,w.cx)(t.modal),r=(0,w.cx)(t.modalHeaderTitle),o=(0,w.cx)("gf-form",t.inputGroup),a=(0,w.cx)(this.state.error&&t.input),s=(0,w.cx)("gf-form-hint-text",t.inputHint),i=(0,w.cx)("gf-form-hint-text",t.inputError);return y().createElement(ae.Modal,{isOpen:!0,onDismiss:this.dismiss,className:n,title:y().createElement("div",{className:r},this.state.loading?y().createElement(ae.Spinner,{size:18}):y().createElement(pe,{icon:"reply-all"}),y().createElement("span",{className:"p-l-1"},"Acknowledge Problem"))},y().createElement("div",{className:o},y().createElement("label",{className:"gf-form-hint"},y().createElement(ae.TextArea,{className:a,type:"text",name:"message",placeholder:"Message",autoComplete:"off",autoFocus:!0,value:this.state.value,onChange:this.handleChange,onKeyDown:this.handleKeyPress}),y().createElement("small",{className:s},"Press Enter to submit"),this.state.error&&y().createElement("small",{className:i},this.state.errorMessage))),y().createElement("div",{className:"gf-form"},y().createElement(ae.VerticalGroup,null,this.renderActions())),this.state.ackError&&y().createElement("div",{className:"gf-form ack-request-error"},y().createElement("span",{className:t.ackError},this.state.ackError)),y().createElement("div",{className:"gf-form-button-row text-center"},y().createElement(ae.Button,{variant:"primary",onClick:this.submit},"Update"),y().createElement(ae.Button,{variant:"secondary",onClick:this.dismiss},"Cancel")))}constructor(e){super(e),this.handleChange=e=>{this.setState({value:e.target.value,error:!1})},this.handleKeyPress=e=>{13===e.which||"Enter"===e.key||27!==e.which&&"Escape"!==e.key||this.dismiss()},this.handleBackdropClick=()=>{this.dismiss()},this.onAcknowledgeToggle=()=>{this.setState({acknowledge:!this.state.acknowledge,error:!1})},this.onChangeSeverityToggle=()=>{this.setState({changeSeverity:!this.state.changeSeverity,error:!1})},this.onCloseProblemToggle=()=>{this.setState({closeProblem:!this.state.closeProblem,error:!1})},this.onChangeSelectedSeverity=e=>{this.setState({selectedSeverity:e})},this.dismiss=()=>{this.setState({value:"",error:!1,errorMessage:"",ackError:"",loading:!1}),this.props.onDismiss()},this.submit=()=>{const{acknowledge:e,changeSeverity:t,closeProblem:n}=this.state,r=e||t||n;if(!this.state.value&&!r)return this.setState({error:!0,errorMessage:"Enter message text or select an action"});this.setState({ackError:"",loading:!0});const o={message:this.state.value};let a=4;this.state.acknowledge&&(a+=2),this.state.changeSeverity&&(a+=8,o.severity=this.state.selectedSeverity),this.state.closeProblem&&(a+=1),o.action=a,this.props.onSubmit(o).then((()=>{this.dismiss()})).catch((e=>{var t,n;const r=(null===(t=e.data)||void 0===t?void 0:t.message)||(null===(n=e.data)||void 0===n?void 0:n.error)||e.data||e.statusText||"";this.setState({ackError:r,loading:!1})}))},this.state={value:"",error:!1,errorMessage:"",ackError:"",acknowledge:!1,closeProblem:!1,changeSeverity:!1,selectedSeverity:e.severity||0,loading:!1}}}ze.defaultProps={withBackdrop:!0};const Fe=(0,ae.stylesFactory)((e=>{const t=e.palette.red;return{modal:w.css`
      width: 500px;
    `,modalHeaderTitle:w.css`
      font-size: ${e.typography.heading.h3};
      padding-top: ${e.spacing.sm};
      margin: 0 ${e.spacing.md};
      display: flex;
    `,inputGroup:w.css`
      margin-bottom: 16px;
    `,input:w.css`
      border-color: ${t};
      border-radius: 2px;
      outline-offset: 2px;
      box-shadow: 0 0 0 2px ${e.colors.bg1}, 0 0 0px 4px ${t};
    `,inputHint:w.css`
      display: inherit;
      float: right;
      color: ${e.colors.textWeak};
    `,inputError:w.css`
      float: left;
      color: ${t};
    `,ackError:w.css`
      color: ${t};
    `}})),De=(0,ae.withTheme)(ze);function Re(e){const{acknowledges:t}=e;return y().createElement("div",{className:"problem-ack-list"},y().createElement("div",{className:"problem-ack-col problem-ack-time"},t.map((e=>y().createElement("span",{key:e.acknowledgeid,className:"problem-ack-time"},e.time)))),y().createElement("div",{className:"problem-ack-col problem-ack-user"},t.map((e=>y().createElement("span",{key:e.acknowledgeid,className:"problem-ack-user"},function(e){return e.name||e.surname?`${e.name} ${e.surname}`.trim():e.user}(e))))),y().createElement("div",{className:"problem-ack-col problem-ack-message"},t.map((e=>y().createElement("span",{key:e.acknowledgeid,className:"problem-ack-message"},e.message)))))}function Me(){return Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Me.apply(this,arguments)}const He=Math.round(9.6);class je extends v.PureComponent{componentDidUpdate(e,t){if(this.rootRef&&t.width!==this.rootRef.clientWidth){const e=this.rootRef.clientWidth;this.setState({width:e})}}getEventDuration(e,t){return 1e3*Math.abs(Number(this.sortedEvents[e].clock)-Number(this.sortedEvents[t].clock))}sortEvents(){const e=l().sortBy(this.props.events,(e=>Number(e.clock)));return this.sortedEvents=e,e}getEventAcks(e){const t=[];for(const n of e)if(n.acknowledges)for(const e of n.acknowledges)t.push(e);return l().sortBy(t,(e=>Number(e.clock)))}render(){if(!this.rootRef)return y().createElement("div",{className:"event-timeline",ref:this.setRootRef});const{timeRange:e,eventPointSize:t,eventRegionHeight:n}=this.props,r=this.sortEvents(),o=this.getEventAcks(r),a=this.state.width+t,s=Math.round(2.5*t),i=a-t,l=Math.round(t/2),c=n/2,u=Math.round(s/2-t/2);return y().createElement("div",{className:"event-timeline",ref:this.setRootRef,style:{transform:`translate(${-l}px, 0)`}},y().createElement($e,{className:"timeline-info-container",event:this.state.highlightedEvent,eventInfo:this.state.eventInfo,show:this.state.showEventInfo,left:l}),y().createElement("svg",{className:"event-timeline-canvas",viewBox:`0 0 ${a} ${s}`},y().createElement("defs",null,y().createElement(Ae,null)),y().createElement("g",{className:"event-timeline-group",transform:`translate(${l}, ${u})`},y().createElement("g",{className:"event-timeline-regions",filter:"url(#boxShadow)"},y().createElement(Be,{events:r,timeRange:e,width:i,height:n,highlightedRegion:this.state.highlightedRegion})),y().createElement("g",{className:"timeline-acknowledges",transform:`translate(0, ${c})`},y().createElement(We,{acknowledges:o,timeRange:e,width:i,size:t,onHighlight:this.handleAckHighlight,onUnHighlight:this.handleAckUnHighlight})),y().createElement("g",{className:"timeline-points",transform:`translate(0, ${c})`},y().createElement(_e,{events:r,timeRange:e,width:i,pointSize:t,onPointHighlight:this.handlePointHighlight,onPointUnHighlight:this.handlePointUnHighlight})))))}constructor(e){super(e),this.setRootRef=e=>{this.rootRef=e;const t=e&&e.clientWidth||0;this.setState({width:t})},this.handlePointHighlight=(e,t)=>{const n=this.sortedEvents[e],r=this.getRegionToHighlight(e);let o;void 0!==t&&(o=this.getEventDuration(e,t)),this.setState({highlightedEvent:n,showEventInfo:!0,highlightedRegion:r,eventInfo:{duration:o}})},this.handlePointUnHighlight=()=>{this.setState({showEventInfo:!1,highlightedRegion:null})},this.handleAckHighlight=(e,t)=>{this.setState({showEventInfo:!0,eventInfo:{timestamp:Number(e.clock),message:e.message}})},this.handleAckUnHighlight=()=>{this.setState({showEventInfo:!1})},this.showEventInfo=e=>{this.setState({highlightedEvent:e,showEventInfo:!0})},this.hideEventInfo=()=>{this.setState({showEventInfo:!1})},this.getRegionToHighlight=e=>"1"===this.sortedEvents[e].value?e+1:e,this.state={width:0,highlightedEvent:null,highlightedRegion:null,showEventInfo:!1,eventInfo:{}}}}function Ae(){return y().createElement(y().Fragment,null,y().createElement("filter",{id:"dropShadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},y().createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2"}),y().createElement("feOffset",{dx:"1",dy:"1"}),y().createElement("feMerge",null,y().createElement("feMergeNode",null),y().createElement("feMergeNode",{in:"SourceGraphic"}))),y().createElement("filter",{id:"boxShadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},y().createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"1"}),y().createElement("feComponentTransfer",null,y().createElement("feFuncA",{type:"linear",slope:"0.7"})),y().createElement("feOffset",{dx:"1",dy:"1"}),y().createElement("feMerge",null,y().createElement("feMergeNode",null),y().createElement("feMergeNode",{in:"SourceGraphic"}))),y().createElement("filter",{id:"glowShadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},y().createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2"}),y().createElement("feMerge",null,y().createElement("feMergeNode",null),y().createElement("feMergeNode",{in:"SourceGraphic"}))),y().createElement("filter",{id:"timelinePointBlur",x:"-50%",y:"-50%",width:"200%",height:"200%"},y().createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2",result:"blurOut"})))}je.defaultProps={okColor:"rgb(56, 189, 113)",problemColor:"rgb(215, 0, 0)",eventRegionHeight:He,eventPointSize:16};class $e extends v.PureComponent{render(){const{event:e,eventInfo:t,show:n,className:r,left:o}=this.props;let a,s;if(e){const t=u()(1e3*Number(e.clock)).format("HH:mm:ss");a=[y().createElement("span",{key:"ts",className:"event-timestamp"},y().createElement("span",{className:"event-timestamp-label"},"Time: "),y().createElement("span",{className:"event-timestamp-value"},t))]}if(t&&t.duration){const e=t.duration,n=u().utc(e).format("HH:mm:ss");s=y().createElement("span",{key:"duration",className:"event-timestamp"},y().createElement("span",{className:"event-timestamp-label"},"Duration: "),y().createElement("span",{className:"event-timestamp-value"},n))}if(t&&t.timestamp){const e=u()(1e3*t.timestamp).format("HH:mm:ss");a=[y().createElement("span",{key:"ts",className:"event-timestamp"},y().createElement("span",{className:"event-timestamp-label"},"Time: "),y().createElement("span",{className:"event-timestamp-value"},e))]}const i={left:o};return n||(i.opacity=0),y().createElement("div",{className:r,style:i},y().createElement("div",null,a),y().createElement("div",null,s),t&&t.message&&y().createElement("div",null,y().createElement("span",{key:"duration",className:"event-timestamp"},y().createElement("span",{className:"event-timestamp-label"},"Message: "),y().createElement("span",{className:"event-timestamp-value"},t.message))))}}$e.defaultProps={left:0,className:"",show:!1};class Be extends v.PureComponent{render(){const{events:e,timeRange:t,width:n,height:r,highlightedRegion:o}=this.props,a=t.from.unix(),s=t.to.unix(),i=s-a;let l;if(e.length){const t=((e.length?Number(e[0].clock):s)-a)/i,c=Math.round(t*n),u=0===o,d=`problem-event-region ${"problem-event--"+("1"!==e[0].value?"problem":"ok")} ${u?"highlighted":""}`,p={x:0,y:0,width:c,height:r};l=y().createElement("rect",Me({key:"0",className:d},p))}const c=e.map(((t,l)=>{const c=Number(t.clock),u=((l<e.length-1?Number(e[l+1].clock):s)-c)/i,d=Math.round(u*n),p=Math.round((c-a)/i*n),m=o&&o-1===l,h=`problem-event-region ${"problem-event--"+("1"===t.value?"problem":"ok")} ${m?"highlighted":""}`,g={x:p,y:0,width:d,height:r};return y().createElement("rect",Me({key:`${t.eventid}-${l}`,className:h},g))}));return y().createElement(y().Fragment,null,l,c)}}Be.defaultProps={highlightedRegion:null};class _e extends v.PureComponent{getRegionEvents(e){const t=this.props.events,n=t[e];if("1"===n.value&&e<t.length){for(let n=e;n<t.length;n++)if("0"===t[n].value)return[e,n]}else if("0"===n.value&&e>0){let n=null;for(let r=e-1;r>=0&&"1"===t[r].value;r--)n=r;if(null!==n)return[e,n]}return[e]}render(){const{events:e,timeRange:t,width:n,pointSize:r}=this.props,o=t.from.unix(),a=t.to.unix()-o,s=r/2,i=e.map(((e,t)=>{const r=Number(e.clock),i=Math.round((r-o)/a*n-s),l="problem-event-item problem-event--"+("1"===e.value?"problem":"ok"),c=-1!==this.state.highlighted.indexOf(t);return y().createElement(Ie,{key:`${e.eventid}-${t}`,className:l,x:i,r:s,highlighted:c,onPointHighlight:this.highlightPoint(t),onPointUnHighlight:this.unHighlightPoint(t)})}));return this.state.order.length?this.state.order.map((e=>i[e])):i}constructor(e){super(e),this.bringToFront=(e,t=!1)=>{const{events:n}=this.props;let r=n.map(((e,t)=>t));r=Ke(r,e);const o=t?e:null;this.setState({order:r,highlighted:o})},this.highlightPoint=e=>()=>{let t=[e];if(this.props.onPointHighlight)if(this.props.highlightRegion){t=this.getRegionEvents(e);const n=2===t.length?t[1]:void 0;this.props.onPointHighlight(e,n)}else this.props.onPointHighlight(e);this.bringToFront(t,!0)},this.unHighlightPoint=e=>()=>{this.props.onPointUnHighlight&&this.props.onPointUnHighlight();const e=this.props.events.map(((e,t)=>t));this.setState({order:e,highlighted:[]})},this.state={order:[],highlighted:[]}}}_e.defaultProps={highlightRegion:!0};class Ie extends v.PureComponent{componentDidUpdate(e){e.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})}render(){const{x:e}=this.props,t=this.state.highlighted?Math.round(1.1*this.props.r):this.props.r,n=e+this.props.r,r=Math.round(.6*t),o=`${this.props.className||""} ${this.state.highlighted?"highlighted":""}`;return y().createElement("g",{className:o,transform:`translate(${n}, 0)`,filter:"url(#dropShadow)",onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave},y().createElement("circle",{cx:0,cy:0,r:t,className:"point-border"}),y().createElement("circle",{cx:0,cy:0,r,className:"point-core"}))}constructor(e){super(e),this.handleMouseOver=()=>{this.props.onPointHighlight&&this.props.onPointHighlight()},this.handleMouseLeave=()=>{this.props.onPointUnHighlight&&this.props.onPointUnHighlight()},this.state={highlighted:!1}}}class We extends v.PureComponent{render(){const{acknowledges:e,timeRange:t,width:n,size:r}=this.props,o=t.from.unix(),a=t.to.unix()-o,s=r/2,i=e.map(((e,t)=>{const r=Number(e.clock),i=Math.round((r-o)/a*n-s),l=this.state.highlighted===t;return y().createElement(Le,{key:`${e.eventid}-${t}`,x:i,r:s,highlighted:l,onHighlight:this.handleHighlight(t),onUnHighlight:this.handleUnHighlight})}));return this.state.order.length?this.state.order.map((e=>i[e])):i}constructor(e){super(e),this.handleHighlight=e=>()=>{if(this.props.onHighlight){const t=this.props.acknowledges[e];this.props.onHighlight(t,e)}this.bringToFront(e,!0)},this.handleUnHighlight=()=>{this.props.onUnHighlight&&this.props.onUnHighlight();const e=this.props.acknowledges.map(((e,t)=>t));this.setState({order:e,highlighted:null})},this.bringToFront=(e,t=!1)=>{const{acknowledges:n}=this.props;let r=n.map(((e,t)=>t));r=Ke(r,[e]);const o=t?e:null;this.setState({order:r,highlighted:o})},this.state={order:[],highlighted:null}}}class Le extends v.PureComponent{componentDidUpdate(e){e.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})}render(){const{x:e}=this.props,t=this.state.highlighted?Math.round(1.1*this.props.r):this.props.r,n=e+this.props.r,r=Math.round(.6*t),o="problem-event-ack "+(this.state.highlighted?"highlighted":"");return y().createElement("g",{className:o,transform:`translate(${n}, 0)`,filter:"url(#dropShadow)",onMouseOver:this.handleHighlight,onMouseLeave:this.handleUnHighlight},y().createElement("circle",{cx:0,cy:0,r:t,className:"point-border"}),y().createElement("circle",{cx:0,cy:0,r,className:"point-core"}))}constructor(e){super(e),this.handleHighlight=()=>{this.props.onHighlight&&this.props.onHighlight()},this.handleUnHighlight=()=>{this.props.onUnHighlight&&this.props.onUnHighlight()},this.state={highlighted:!1}}}function Ke(e,t){const n=l().pullAt(e,t);return n.reverse(),e.push(...n),e}function Ve(e,t,n,r,o,a,s){try{var i=e[a](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}class Ge extends v.PureComponent{componentDidMount(){var e,t=this;return(e=function*(){const e=yield t.props.getScripts();t.scripts=e;const n=e.map((e=>({value:e.scriptid,label:e.name,description:e.description||e.command}))),r=(null==n?void 0:n.length)?n[0]:null,o=e.find((e=>r.value===e.scriptid));t.setState({scriptOptions:n,selectedScript:r,script:o})},function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){Ve(a,r,o,s,i,"next",e)}function i(e){Ve(a,r,o,s,i,"throw",e)}s(void 0)}))})()}render(){const{theme:e}=this.props,{scriptOptions:t,selectedScript:n,script:r,result:o,selectError:a,errorMessage:s,error:i}=this.state,l=Ue(e),c=(0,w.cx)(l.modal),u=(0,w.cx)(l.modalHeaderTitle),d=(0,w.cx)("gf-form-hint-text",l.inputError),p=(0,w.cx)("gf-form",l.scriptCommandContainer),m=(0,w.cx)("gf-form-hint-text",l.scriptCommand);return y().createElement(ae.Modal,{isOpen:!0,onDismiss:this.dismiss,className:c,title:y().createElement("div",{className:u},this.state.loading?y().createElement(ae.Spinner,{size:18}):y().createElement(pe,{icon:"terminal"}),y().createElement("span",{className:"p-l-1"},"Execute script"))},y().createElement("div",{className:"gf-form"},y().createElement("label",{className:"gf-form-hint"},y().createElement(ae.Select,{options:t,value:n,onChange:this.onChangeSelectedScript}),a&&y().createElement("small",{className:d},a))),y().createElement("div",{className:p},r&&y().createElement("small",{className:m},r.command)),y().createElement("div",{className:l.resultContainer},o&&y().createElement("span",{className:l.execResult},o),i&&y().createElement("span",{className:l.execError},s)),y().createElement("div",{className:"gf-form-button-row text-center"},y().createElement(ae.Button,{variant:"primary",onClick:this.submit},"Execute"),y().createElement(ae.Button,{variant:"secondary",onClick:this.dismiss},"Cancel")))}constructor(e){super(e),this.onChangeSelectedScript=e=>{const t=this.scripts.find((t=>e.value===t.scriptid));this.setState({selectedScript:e,script:t,errorMessage:"",loading:!1,result:""})},this.dismiss=()=>{this.setState({selectedScript:null,error:!1,errorMessage:"",selectError:"",loading:!1}),this.props.onDismiss()},this.submit=()=>{const{selectedScript:e}=this.state;if(!e)return this.setState({selectError:"Select a script to execute."});this.setState({errorMessage:"",loading:!0,result:""});const t={scriptid:e.value};this.props.onSubmit(t).then((e=>{const t=this.formatResult((null==e?void 0:e.value)||"");"success"===(null==e?void 0:e.response)?this.setState({result:t,loading:!1}):this.setState({error:!0,errorMessage:t,loading:!1})})).catch((e=>{var t,n;let r=(null===(t=e.data)||void 0===t?void 0:t.message)||(null===(n=e.data)||void 0===n?void 0:n.error)||e.data||e.statusText||"";r=this.formatResult(r),this.setState({error:!0,loading:!1,errorMessage:r})}))},this.formatResult=e=>{const t=e.split("\n").map(((e,t)=>y().createElement("p",{key:t},e)));return y().createElement(y().Fragment,null,t)},this.state={error:!1,errorMessage:"",selectError:"",selectedScript:null,result:"",loading:!1,scriptOptions:[],script:null}}}const Ue=(0,ae.stylesFactory)((e=>{const t=e.palette.red;return{modal:w.css`
      width: 600px;
    `,modalHeaderTitle:w.css`
      font-size: ${e.typography.heading.h3};
      padding-top: ${e.spacing.sm};
      margin: 0 ${e.spacing.md};
      display: flex;
    `,input:w.css`
      border-color: ${t};
      border-radius: 2px;
      outline-offset: 2px;
      box-shadow: 0 0 0 2px ${e.colors.bg1}, 0 0 0px 4px ${t};
    `,scriptCommandContainer:w.css`
      margin-bottom: ${e.spacing.md};
    `,scriptCommand:w.css`
      color: ${e.colors.textWeak};
      text-align: left;
      font-family: ${e.typography.fontFamily.monospace};
    `,inputHint:w.css`
      display: inherit;
      float: right;
      color: ${e.colors.textWeak};
    `,inputError:w.css`
      float: left;
      color: ${t};
    `,resultContainer:w.css`
      min-height: 50px;
      font-family: ${e.typography.fontFamily.monospace};
      font-size: ${e.typography.size.sm};
      p {
        font-size: ${e.typography.size.sm};
        margin-bottom: 0px;
      }
    `,execResult:w.css``,execError:w.css`
      color: ${t};
    `}})),qe=(0,ae.withTheme)(Ge);function Je(e){const{problem:t,alerts:n,className:r}=e,o="1"===t.type,a=t.url&&""!==t.url,s=t.maintenance,i="1"===t.manual_close,l=t.error&&""!==t.error,c="1"===t.state,u="1"===t.correlation_mode,d=n&&0!==n.length,p=d?n[0].message:"";return y().createElement("div",{className:`problem-statusbar ${r||""}`},y().createElement(Ye,{icon:"wrench",fired:s,tooltip:"Host maintenance"}),y().createElement(Ye,{icon:"globe",fired:a,link:a&&t.url,tooltip:"External link"}),y().createElement(Ye,{icon:"bullhorn",fired:o,tooltip:"Trigger generates multiple problem events"}),y().createElement(Ye,{icon:"tag",fired:u,tooltip:`OK event closes problems matched to tag: ${t.correlation_tag}`}),y().createElement(Ye,{icon:"circle-o-notch",fired:d,tooltip:p}),y().createElement(Ye,{icon:"question-circle",fired:c,tooltip:"Current trigger state is unknown"}),y().createElement(Ye,{icon:"warning",fired:l,tooltip:t.error}),y().createElement(Ye,{icon:"window-close-o",fired:i,tooltip:"Manual close problem"}))}function Ye(e){const{fired:t,icon:n,link:r,tooltip:o}=e;let a=y().createElement("div",{className:"problem-statusbar-item "+(t?"fired":"muted")},y().createElement(me,{icon:n}));return o&&t&&(a=y().createElement(ae.Tooltip,{placement:"bottom",content:o},a)),r?y().createElement("a",{href:r,target:"_blank",rel:"noreferrer"},a):a}const Xe=({items:e})=>{const t=(0,ae.useStyles2)(Ze);return y().createElement("div",{className:t.itemsRow},e.length>1?e.map((e=>y().createElement(Qe,{item:e,key:e.itemid,showName:!0}))):y().createElement(Qe,{item:e[0]}))},Qe=({item:e,showName:t})=>{const n=(0,ae.useStyles2)(Ze),r=h(e.name,e.key_);return y().createElement("div",{className:n.itemContainer},y().createElement(pe,{icon:"thermometer-three-quarters"}),t&&y().createElement("span",{className:n.itemName},e.name,": "),y().createElement(ae.Tooltip,{placement:"top-start",content:()=>y().createElement(y().Fragment,null,r,y().createElement("br",null),e.lastvalue)},y().createElement("span",null,e.lastvalue)))},Ze=e=>({itemContainer:w.css`
    display: flex;
  `,itemName:w.css`
    color: ${e.colors.text.secondary};
  `,itemsRow:w.css`
    overflow: hidden;
  `}),et=({hosts:e})=>{const t=(0,ae.useStyles2)(nt);return y().createElement(y().Fragment,null,e.map((e=>y().createElement("div",{className:t.hostContainer,key:e.hostid},y().createElement(pe,{icon:"server"}),y().createElement("span",null,e.name)))))},tt=({hosts:e})=>{const t=(0,ae.useStyles2)(nt);return y().createElement(y().Fragment,null,y().createElement("span",{className:t.label},"Host description: "),e.map(((e,t)=>y().createElement("span",{key:`${e.hostid}-${t}`},e.description))))},nt=e=>({hostContainer:w.css`
    margin-bottom: ${e.spacing(.2)};
  `,label:w.css`
    color: ${e.colors.text.secondary};
  `}),rt=({groups:e})=>{const t=(0,ae.useStyles2)(ot);return y().createElement(y().Fragment,null,e.map((e=>y().createElement("div",{className:t.groupContainer,key:e.groupid},y().createElement(pe,{icon:"folder"}),y().createElement("span",null,e.name)))))},ot=e=>({groupContainer:w.css`
    margin-bottom: ${e.spacing(.2)};
  `}),at=({problem:e})=>{const t=(0,ae.useStyles2)(st);return y().createElement(y().Fragment,null,y().createElement(ae.Tooltip,{placement:"right",content:e.expression},y().createElement("span",{className:t.label},"Expression: ")),y().createElement("span",{className:t.expression},e.expression))},st=e=>({label:w.css`
    color: ${e.colors.text.secondary};
  `,expression:w.css`
    font-family: ${e.typography.fontFamilyMonospace};
  `});function it(e,t,n,r,o,a,s){try{var i=e[a](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function lt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){it(a,r,o,s,i,"next",e)}function i(e){it(a,r,o,s,i,"throw",e)}s(void 0)}))}}const ct=({original:e,rootWidth:t,timeRange:n,showTimeline:r,panelId:o,allowDangerousHTML:a,getProblemAlerts:s,getProblemEvents:i,getScripts:l,onExecuteScript:c,onProblemAck:d,onTagClick:p})=>{var m;const[h,g]=(0,v.useState)([]),[f,E]=(0,v.useState)([]),[w,P]=(0,v.useState)(!1);(0,v.useEffect)((()=>{r&&C(),S(),requestAnimationFrame((()=>{P(!0)}))}),[]);const C=(x=lt((function*(){const t=e,n=yield i(t);g(n)})),function(){return x.apply(this,arguments)});var x;const S=function(){var t=lt((function*(){const t=e,n=yield s(t);E(n)}));return function(){return t.apply(this,arguments)}}(),k=(e,t,n,r)=>{p&&p(e,t,n,r)},N=t=>d(e,t),T=()=>l(e),O=t=>c(e,t.scriptid),z=e,F=w?"show":"",D=t>1200,R=t<800||z.acknowledges&&D&&t<1400,M=u().unix(z.timestamp).fromNow(!0),H=z.acknowledges&&0!==z.acknowledges.length,j=Number(z.severity),A=(0,ae.useStyles2)(ut);let $=e.datasource;(null===(m=e.datasource)||void 0===m?void 0:m.uid)&&($=(0,b.getDataSourceSrv)().getInstanceSettings(e.datasource.uid).name);const B=a?y().createElement("span",{dangerouslySetInnerHTML:{__html:z.comments}}):y().createElement("span",null,z.comments);return y().createElement("div",{className:`problem-details-container ${F}`},y().createElement("div",{className:"problem-details-body"},y().createElement("div",{className:A.problemDetails},y().createElement("div",{className:"problem-details-head"},y().createElement("div",{className:"problem-actions-left"},y().createElement(ve,{problem:z,panelId:o,range:n})),z.showAckButton&&y().createElement("div",{className:"problem-actions"},y().createElement(Ne,null,(({showModal:e,hideModal:t})=>y().createElement(be,{className:"problem-action-button",onClick:()=>{e(qe,{getScripts:T,onSubmit:O,onDismiss:t})}}))),y().createElement(Ne,null,(({showModal:e,hideModal:t})=>y().createElement(fe,{className:"problem-action-button",onClick:()=>{e(De,{canClose:"1"===z.manual_close,severity:j,onSubmit:N,onDismiss:t})}})))),y().createElement(Je,{problem:z,alerts:f,className:R&&"compact"})),y().createElement("div",{className:"problem-details-row"},y().createElement("div",{className:"problem-value-container"},y().createElement("div",{className:"problem-age"},y().createElement(pe,{icon:"clock-o"}),y().createElement("span",null,M)),z.items&&y().createElement(Xe,{items:z.items}))),z.comments&&y().createElement("div",{className:"problem-description-row"},y().createElement("div",{className:A.problemDescription},y().createElement(ae.Tooltip,{placement:"right",content:B},y().createElement("span",{className:"description-label"},"Description: ")),B)),z.items&&y().createElement("div",null,y().createElement(at,{problem:z})),z.hosts&&y().createElement("div",null,y().createElement(tt,{hosts:z.hosts})),z.tags&&z.tags.length>0&&y().createElement("div",{className:"problem-tags"},z.tags&&z.tags.map((e=>y().createElement(ce,{key:e.tag+e.value,tag:e,datasource:z.datasource,highlight:e.tag===z.correlation_tag,onClick:k})))),r&&h.length>0&&y().createElement(je,{events:h,timeRange:n}),H&&!D&&y().createElement("div",{className:"problem-ack-container"},y().createElement("h6",null,y().createElement(pe,{icon:"reply-all"})," Acknowledges"),y().createElement(Re,{acknowledges:z.acknowledges}))),H&&D&&y().createElement("div",{className:"problem-details-middle"},y().createElement("div",{className:"problem-ack-container"},y().createElement("h6",null,y().createElement(pe,{icon:"reply-all"})," Acknowledges"),y().createElement(Re,{acknowledges:z.acknowledges}))),y().createElement("div",{className:"problem-details-right"},y().createElement("div",{className:"problem-details-right-item"},y().createElement(pe,{icon:"database"}),y().createElement("span",null,$)),z.proxy&&y().createElement("div",{className:"problem-details-right-item"},y().createElement(pe,{icon:"cloud"}),y().createElement("span",null,z.proxy)),z.groups&&y().createElement(rt,{groups:z.groups}),z.hosts&&y().createElement(et,{hosts:z.hosts}))))},ut=e=>({problemDetails:w.css`
    position: relative;
    flex: 10 1 auto;
    // padding: 0.5rem 1rem 0.5rem 1.2rem;
    padding: ${e.spacing(.5)} ${e.spacing(1)} ${e.spacing(.5)} ${e.spacing(1.2)};
    display: flex;
    flex-direction: column;
    // white-space: pre-line;
    font-size: ${e.typography.bodySmall.fontSize};
  `,problemDescription:w.css`
    position: relative;
    max-height: 6rem;
    min-height: 3rem;
    overflow: hidden;

    &:after {
      content: '';
      text-align: right;
      position: inherit;
      bottom: 0;
      right: 0;
      width: 70%;
      height: 1.5rem;
      background: linear-gradient(to right, rgba(0, 0, 0, 0), ${e.colors.background.canvas} 50%);
    }
  `}),dt=(0,ae.stylesFactory)((e=>({countLabel:w.css`
      font-size: ${e.typography.size.sm};
    `}))),pt=e=>{var t,n;const r=e.original,o=(0,ae.useTheme)(),a=dt(o);return y().createElement("div",null,(null===(t=r.acknowledges)||void 0===t?void 0:t.length)>0&&y().createElement(y().Fragment,null,y().createElement(pe,{icon:"comments"}),y().createElement("span",{className:a.countLabel}," (",null===(n=r.acknowledges)||void 0===n?void 0:n.length,")")))};function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(){return ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ht.apply(this,arguments)}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){mt(e,t,n[t])}))}return e}class ft extends v.PureComponent{buildColumns(){const e=[],t=this.props.panelOptions,n=t.highlightNewEvents&&t.highlightNewerThan,r=[{Header:"Host",id:"host",show:t.hostField,Cell:e=>y().createElement(vt,{name:e.original.host,maintenance:e.original.hostInMaintenance})},{Header:"Host (Technical Name)",id:"hostTechName",show:t.hostTechNameField,Cell:e=>y().createElement(vt,{name:e.original.hostTechName,maintenance:e.original.hostInMaintenance})},{Header:"Host Groups",accessor:"groups",show:t.hostGroups,Cell:Et},{Header:"Proxy",accessor:"proxy",show:t.hostProxy},{Header:"Severity",show:t.severityField,className:"problem-severity",width:120,accessor:e=>e.priority,id:"severity",Cell:e=>function(e,t,n,r,o=yt){const a=e.original;let s,i;const c=Number(a.severity);return i=l().find(t,(e=>e.priority===c)),a.severity&&"1"===a.value&&(i=l().find(t,(e=>e.priority===c))),s="0"===a.value?o:i.color,n&&"1"===a.acknowledged&&(s=r),y().createElement("div",{className:"severity-cell",style:{background:s}},i.severity)}(e,t.triggerSeverity,t.markAckEvents,t.ackEventColor,t.okEventColor)},{Header:"",id:"statusIcon",show:t.statusIcon,className:"problem-status-icon",width:50,accessor:"value",Cell:e=>function(e,t){const n="0"===e.value?"ok":"problem";let r=!1;t&&(r=g(e.original,t));const o=(0,w.cx)("zbx-problem-status-icon",{"problem-status--new":r},{"zbx-problem":"1"===e.value},{"zbx-ok":"0"===e.value});return y().createElement(de,{status:n,className:o})}(e,n)},{Header:"Status",accessor:"value",show:t.statusField,width:100,Cell:e=>function(e,t){const n="0"===e.value?"RESOLVED":"PROBLEM",r="0"===e.value?yt:bt;let o=!1;return t&&(o=g(e.original,t)),y().createElement("span",{className:o?"problem-status--new":"",style:{color:r}},n)}(e,n)},{Header:"Problem",accessor:"name",minWidth:200,Cell:wt},{Header:"Operational data",accessor:"opdata",show:t.opdataField,width:150,Cell:Pt},{Header:"Ack",id:"ack",show:t.ackField,width:70,Cell:e=>y().createElement(pt,ht({},e))},{Header:"Tags",accessor:"tags",show:t.showTags,className:"problem-tags",Cell:e=>y().createElement(xt,ht({},e,{onTagClick:this.handleTagClick}))},{Header:"Age",className:"problem-age",width:100,show:t.ageField,accessor:"timestamp",id:"age",Cell:Ct},{Header:"Time",className:"last-change",width:150,accessor:"timestamp",id:"lastchange",Cell:e=>function(e,t){const n=e.original,r=t||"DD MMM YYYY HH:mm:ss",o=u().unix(n.timestamp).format(r);return y().createElement("span",null,o)}(e,t.customLastChangeFormat&&t.lastChangeFormat)},{Header:"",className:"custom-expander",width:60,expander:!0,Expander:St}];for(const t of r)(t.show||void 0===t.show)&&(delete t.show,e.push(t));return e}render(){const e=this.buildColumns();this.rootWidth=this.rootRef&&this.rootRef.clientWidth;const{pageSize:t,fontSize:n,panelOptions:r}=this.props,o=(0,w.cx)("panel-problems",{[`font-size--${n}`]:!!n});let a=[5,10,20,25,50,100];return t&&(a.push(t),a=l().uniq(l().sortBy(a))),y().createElement("div",{className:o,ref:this.setRootRef},y().createElement(oe,{data:this.props.problems,columns:e,defaultPageSize:10,pageSize:t,pageSizeOptions:a,resized:r.resizedColumns,minRows:0,loading:this.props.loading,noDataText:"No problems found",SubComponent:e=>y().createElement(ct,ht({},e,{rootWidth:this.rootWidth,timeRange:this.props.timeRange,showTimeline:r.problemTimeline,allowDangerousHTML:r.allowDangerousHTML,panelId:this.props.panelId,getProblemEvents:this.props.getProblemEvents,getProblemAlerts:this.props.getProblemAlerts,getScripts:this.props.getScripts,onProblemAck:this.handleProblemAck,onExecuteScript:this.props.onExecuteScript,onTagClick:this.handleTagClick,subRows:!1})),expanded:this.getExpandedPage(this.state.page),onExpandedChange:this.handleExpandedChange,onPageChange:e=>this.setState({page:e}),onPageSizeChange:this.handlePageSizeChange,onResizedChange:this.handleResizedChange}))}constructor(e){super(e),this.setRootRef=e=>{this.rootRef=e},this.handleProblemAck=(e,t)=>this.props.onProblemAck(e,t),this.onExecuteScript=(e,t)=>{},this.handlePageSizeChange=(e,t)=>{this.props.onPageSizeChange&&this.props.onPageSizeChange(e,t)},this.handleResizedChange=(e,t)=>{this.props.onColumnResize&&this.props.onColumnResize(e)},this.handleExpandedChange=(e,t)=>{const{problems:n,pageSize:r}=this.props,{page:o}=this.state,a={};for(const t in e){const s=r*o+Number(t);if(e[t]&&s<n.length){const e=n[s].eventid;e&&(a[e]=!0)}}const s=gt({},this.state.expanded);s[o]=e;const i=gt({},this.state.expandedProblems);i[o]=a,this.setState({expanded:s,expandedProblems:i})},this.handleTagClick=(e,t,n,r)=>{this.props.onTagClick&&this.props.onTagClick(e,t,n,r)},this.getExpandedPage=e=>{const{problems:t,pageSize:n}=this.props,{expandedProblems:r}=this.state,o=r[e]||{},a={},s=n*e,i=Math.min(s+n,t.length);for(let e=s;e<i;e++)o[t[e].eventid]&&(a[e-s]={});return a},this.rootWidth=0,this.state={expanded:{},expandedProblems:{},page:0}}}const vt=({name:e,maintenance:t})=>y().createElement("div",null,y().createElement("span",{style:{paddingRight:"0.4rem"}},e),t&&y().createElement(pe,{customClass:"fired",icon:"wrench"})),yt="rgb(56, 189, 113)",bt="rgb(215, 0, 0)";function Et(e){let t="";return e.value&&e.value.length&&(t=e.value.map((e=>e.name)).join(", ")),y().createElement("span",null,t)}function wt(e){return y().createElement("div",null,y().createElement("span",{className:"problem-description"},e.value))}function Pt(e){const t=e.original;return y().createElement("div",null,y().createElement("span",null,t.opdata))}function Ct(e){const t=e.original,n=u().unix(t.timestamp).fromNow(!0);return y().createElement("span",null,n)}class xt extends v.PureComponent{render(){return[(this.props.value||[]).map((e=>y().createElement(ce,{key:e.tag+e.value,tag:e,datasource:this.props.original.datasource,onClick:this.handleTagClick})))]}constructor(...e){super(...e),this.handleTagClick=(e,t,n,r)=>{this.props.onTagClick&&this.props.onTagClick(e,t,n,r)}}}function St(e){return y().createElement("span",{className:e.isExpanded?"expanded":""},y().createElement("i",{className:"fa fa-info-circle"}))}class kt extends v.PureComponent{render(){const{problem:e}=this.props,t=e.acknowledges&&e.acknowledges.map((e=>y().createElement("tr",{key:e.acknowledgeid},y().createElement("td",null,e.time),y().createElement("td",null,e.user),y().createElement("td",null,e.message))));return y().createElement("div",{className:"ack-tooltip"},y().createElement("table",{className:"table"},y().createElement("thead",null,y().createElement("tr",null,y().createElement("th",{className:"ack-time"},"Time"),y().createElement("th",{className:"ack-user"},"User"),y().createElement("th",{className:"ack-comments"},"Comments"))),y().createElement("tbody",null,t)),e.showAckButton&&y().createElement("div",{className:"ack-add-button"},y().createElement("button",{id:"add-acknowledge-btn",className:"btn btn-mini btn-inverse gf-form-button",onClick:this.handleClick},y().createElement("i",{className:"fa fa-plus"}))))}constructor(...e){super(...e),this.handleClick=e=>{this.props.onClick(e)}}}const Nt=({problem:e,color:t,blink:n,highlightBackground:r})=>{const o=Number(e.severity),a="1"===e.value&&o>=2?"critical":"online",s=(0,w.cx)("icon-gf",n&&"zabbix-trigger--blinked"),i=(0,w.cx)("alert-rule-item__icon",!r&&w.css`
        color: ${t};
      `);return y().createElement("div",{className:i},y().createElement(de,{status:a,className:s}))};class Tt extends v.PureComponent{render(){var e;const{problem:t,panelOptions:n}=this.props,r=n.targets&&n.targets.length>1,o=(0,w.cx)("alert-rule-item","zbx-trigger-card",{"zbx-trigger-highlighted":n.highlightBackground}),a=(0,w.cx)("alert-rule-item__text",{"zbx-description--newline":n.descriptionAtNewLine}),i=Number(t.severity);let c;c=l().find(n.triggerSeverity,(e=>e.priority===i)),t.severity&&(c=l().find(n.triggerSeverity,(e=>e.priority===i)));const d=function(e,t){const n=new Date(1e3*e),r=t||"DD MMM YYYY HH:mm:ss";return s.dateMath.parse(n).format(r)}(t.timestamp,n.customLastChangeFormat&&n.lastChangeFormat),p=u().unix(t.timestamp).fromNow(!0);let m=t.datasource;if(null===(e=t.datasource)||void 0===e?void 0:e.uid){const e=(0,b.getDataSourceSrv)().getInstanceSettings(t.datasource.uid);m=e.name}let h=!1;n.highlightNewerThan&&(h=g(t,n.highlightNewerThan));const f=n.highlightNewEvents&&h;let v;v="0"===t.value?n.okEventColor:n.markAckEvents&&"1"===t.acknowledged?n.ackEventColor:c.color;const E={};return n.highlightBackground&&(E.backgroundColor=v),y().createElement("li",{className:o,style:E},y().createElement(Nt,{problem:t,color:v,highlightBackground:n.highlightBackground,blink:f}),y().createElement("div",{className:"alert-rule-item__body"},y().createElement("div",{className:"alert-rule-item__header"},y().createElement("div",{className:"alert-rule-item__name"},y().createElement("span",{className:"zabbix-trigger-name"},t.description),(n.hostField||n.hostTechNameField)&&y().createElement(Ot,{problem:t,panelOptions:n}),n.hostGroups&&y().createElement(zt,{problem:t,panelOptions:n}),n.showTags&&y().createElement("span",{className:"zbx-trigger-tags"},t.tags&&t.tags.map((e=>y().createElement(ce,{key:e.tag+e.value,tag:e,datasource:m,highlight:e.tag===t.correlation_tag,onClick:this.handleTagClick}))))),y().createElement("div",{className:a},n.statusField&&y().createElement(Ft,{problem:t,blink:f}),n.severityField&&y().createElement(Dt,{severityDesc:c,blink:f,highlightBackground:n.highlightBackground}),y().createElement("span",{className:"alert-rule-item__time"},n.ageField&&"for "+p),n.descriptionField&&!n.descriptionAtNewLine&&y().createElement(y().Fragment,null,n.allowDangerousHTML?y().createElement("span",{className:"zbx-description",dangerouslySetInnerHTML:{__html:t.comments}}):y().createElement("span",{className:"zbx-description"},t.comments))),n.descriptionField&&n.descriptionAtNewLine&&y().createElement("div",{className:"alert-rule-item__text zbx-description--newline"},n.allowDangerousHTML?y().createElement("span",{className:"alert-rule-item__info zbx-description",dangerouslySetInnerHTML:{__html:t.comments}}):y().createElement("span",{className:"alert-rule-item__info zbx-description"},t.comments)))),r&&y().createElement("div",{className:"alert-rule-item__time zabbix-trigger-source"},y().createElement("span",null,y().createElement("i",{className:"fa fa-database"}),m)),y().createElement("div",{className:"alert-rule-item__time zbx-trigger-lastchange"},y().createElement("span",null,d||"last change unknown"),y().createElement("div",{className:"trigger-info-block zbx-status-icons"},t.url&&y().createElement("a",{href:t.url,target:"_blank",rel:"noreferrer"},y().createElement("i",{className:"fa fa-external-link"})),"1"===t.state&&y().createElement(ae.Tooltip,{placement:"bottom",content:t.error},y().createElement("span",null,y().createElement("i",{className:"fa fa-question-circle"}))),t.eventid&&y().createElement(Ne,null,(({showModal:e,hideModal:n})=>y().createElement(Rt,{problem:t,onClick:()=>{e(De,{canClose:"1"===t.manual_close,severity:i,onSubmit:this.ackProblem,onDismiss:n})}}))))))}constructor(...e){super(...e),this.handleTagClick=(e,t,n,r)=>{this.props.onTagClick&&this.props.onTagClick(e,t,n,r)},this.ackProblem=e=>{const t=this.props.problem;return this.props.onProblemAck(t,e)}}}function Ot(e){const t=e.problem,n=e.panelOptions;let r="";return n.hostField&&n.hostTechNameField?r=`${t.host} (${t.hostTechName})`:(n.hostField||n.hostTechNameField)&&(r=n.hostField?t.host:t.hostTechName),n.hostProxy&&t.proxy&&(r=`${t.proxy}: ${r}`),y().createElement("span",{className:"zabbix-hostname"},t.maintenance&&y().createElement("i",{className:"fa fa-wrench zbx-maintenance-icon"}),r)}function zt(e){const t=e.problem;let n="";return e.panelOptions.hostGroups&&(n+=`[ ${l().map(t.groups,"name").join(", ")} ]`),y().createElement("span",{className:"zabbix-hostname"},n)}function Ft(e){const{problem:t,okColor:n,problemColor:r,blink:o}=e,a="0"===t.value?"RESOLVED":"PROBLEM",s="0"===t.value?n||"rgb(56, 189, 113)":r||"rgb(215, 0, 0)",i=(0,w.cx)("zbx-trigger-state",{"alert-state-critical":"1"===t.value},{"alert-state-ok":"0"===t.value},{"zabbix-trigger--blinked":o});return y().createElement("span",{className:i,style:{color:s}},a)}function Dt(e){const{severityDesc:t,highlightBackground:n,blink:r}=e,o=(0,w.cx)("zbx-trigger-severity",{"zabbix-trigger--blinked":r}),a={};return n||(a.color=t.color),y().createElement("span",{className:o,style:a},t.severity)}class Rt extends v.PureComponent{render(){const{problem:e}=this.props;let t=null;return e.acknowledges&&e.acknowledges.length?t=y().createElement(ae.Tooltip,{placement:"auto",content:this.renderTooltipContent,interactive:!0},y().createElement("span",null,y().createElement("i",{className:"fa fa-comments"}))):e.showAckButton&&(t=y().createElement(ae.Tooltip,{placement:"bottom",content:"Acknowledge problem"},y().createElement("span",{role:"button",onClick:this.handleClick},y().createElement("i",{className:"fa fa-comments-o"})))),t}constructor(...e){super(...e),this.handleClick=e=>{this.props.onClick(e)},this.renderTooltipContent=()=>y().createElement(kt,{problem:this.props.problem,onClick:this.handleClick})}}class Mt extends v.PureComponent{getCurrentProblems(e){const{pageSize:t,problems:n}=this.props,r=t*e,o=Math.min(t*(e+1),n.length);return this.props.problems.slice(r,o)}render(){const{problems:e,panelOptions:t}=this.props,n=this.getCurrentProblems(this.state.page);let r=parseInt(t.fontSize.slice(0,t.fontSize.length-1),10);r=r&&100!==r?r:null;const o=(0,w.cx)("alert-rule-list",{[`font-size--${r}`]:!!r});return y().createElement("div",{className:"triggers-panel-container",key:"alertListContainer"},y().createElement("section",{className:"card-section card-list-layout-list"},y().createElement("ol",{className:o},n.map(((e,n)=>{var r;return y().createElement(Tt,{key:`${e.triggerid}-${e.eventid}-${(null===(r=e.datasource)||void 0===r?void 0:r.uid)||e.datasource}-${n}`,problem:e,panelOptions:t,onTagClick:this.handleTagClick,onProblemAck:this.handleProblemAck})})))),y().createElement("div",{className:"triggers-panel-footer",key:"alertListFooter"},y().createElement(Ht,{itemsLength:e.length,pageSize:this.props.pageSize,pageIndex:this.state.page,onPageChange:this.handlePageChange})))}constructor(e){super(e),this.handlePageChange=e=>{const t=this.getCurrentProblems(e);this.setState({page:e,currentProblems:t})},this.handleTagClick=(e,t,n,r)=>{this.props.onTagClick&&this.props.onTagClick(e,t,n,r)},this.handleProblemAck=(e,t)=>this.props.onProblemAck(e,t),this.state={page:0,currentProblems:this.getCurrentProblems(0)}}}class Ht extends v.PureComponent{render(){const{itemsLength:e,pageIndex:t,pageSize:n}=this.props,r=Math.ceil(e/n);if(1===r)return y().createElement("ul",null);const o=Math.max(t-3,0),a=Math.min(r,o+9),s=[];for(let e=o;e<a;e++){const n=(0,w.cx)("triggers-panel-page-link","pointer",{active:e===t}),r=e+1,o=y().createElement("li",{key:r.toString()},y().createElement("a",{className:n,onClick:this.handlePageChange(e)},r));s.push(o)}return y().createElement("ul",null,s)}constructor(...e){super(...e),this.handlePageChange=e=>()=>{this.props.onPageChange(e)}}}function jt(e,t,n,r,o,a,s){try{var i=e[a](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function At(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){jt(a,r,o,s,i,"next",e)}function i(e){jt(a,r,o,s,i,"throw",e)}s(void 0)}))}}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$t(e,t,n[t])}))}return e}function _t(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const It={schemaVersion:8,hostField:!0,hostTechNameField:!1,hostProxy:!1,hostGroups:!1,showTags:!0,statusField:!0,statusIcon:!1,severityField:!0,ackField:!0,ageField:!1,opdataField:!1,descriptionField:!0,descriptionAtNewLine:!1,sortProblems:"lastchange",limit:void 0,layout:"table",fontSize:"100%",pageSize:10,problemTimeline:!0,highlightBackground:!1,highlightNewEvents:!1,highlightNewerThan:"1h",customLastChangeFormat:!1,lastChangeFormat:"",resizedColumns:[],allowDangerousHTML:!1,triggerSeverity:[{priority:0,severity:"Not classified",color:"rgb(108, 108, 108)",show:!0},{priority:1,severity:"Information",color:"rgb(120, 158, 183)",show:!0},{priority:2,severity:"Warning",color:"rgb(175, 180, 36)",show:!0},{priority:3,severity:"Average",color:"rgb(255, 137, 30)",show:!0},{priority:4,severity:"High",color:"rgb(255, 101, 72)",show:!0},{priority:5,severity:"Disaster",color:"rgb(215, 0, 0)",show:!0}],okEventColor:"rgb(56, 189, 113)",ackEventColor:"rgb(56, 219, 156)",markAckEvents:!1},Wt=({onChange:e})=>y().createElement(ae.Button,{variant:"secondary",onClick:()=>e([])},"Reset columns");function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Lt(e,t,n[t])}))}return e}function Vt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const Gt=({value:e,onChange:t})=>{const n=n=>{e.forEach(((t,r)=>{t.priority===n.priority&&(e[r]=n)})),t(e)};return y().createElement(y().Fragment,null,e.map(((e,t)=>y().createElement(Ut,{key:`${e.priority}-${t}`,value:e,onChange:e=>n(e)}))))},Ut=({value:e,onChange:t})=>y().createElement(ae.VerticalGroup,null,y().createElement(ae.InlineFieldRow,null,y().createElement(ae.InlineField,{labelWidth:12},y().createElement(ae.Input,{width:24,defaultValue:e.severity,onBlur:n=>{var r;const o=null==n||null===(r=n.currentTarget)||void 0===r?void 0:r.value;null!==o&&t(Vt(Kt({},e),{severity:o}))}})),y().createElement(ae.InlineLabel,{width:4},y().createElement(ae.ColorPicker,{color:e.color,onChange:n=>t(Vt(Kt({},e),{color:n}))})),y().createElement(ae.InlineField,{label:"Show"},y().createElement(ae.InlineSwitch,{value:e.show,onChange:()=>t(Vt(Kt({},e),{show:!e.show}))}))));(0,b.loadPluginCss)({dark:"plugins/alexanderzobnin-zabbix-app/styles/dark.css",light:"plugins/alexanderzobnin-zabbix-app/styles/light.css"});const qt=new s.PanelPlugin((e=>{const{data:t,options:n,timeRange:r,onOptionsChange:o}=e,{layout:a,showTriggers:i,triggerSeverity:c,sortProblems:u}=n,d=()=>{const e=[];if(!(null==t?void 0:t.series))return[];for(const n of t.series)try{const t=n.fields[0].values;t.toArray&&e.push(...t.toArray())}catch(e){return console.log(e),[]}let n=l().cloneDeep(e);return n=n.map((e=>g(e))),n=p(n),n=h(n),n},p=e=>{let t=l().cloneDeep(e);return"unacknowledged"===i?t=t.filter((e=>!(e.acknowledges&&e.acknowledges.length))):"acknowledged"===i&&(t=t.filter((e=>e.acknowledges&&e.acknowledges.length))),t=t.filter((e=>{const t=void 0!==e.severity?Number(e.severity):Number(e.priority);return c[t].show})),t},h=e=>("priority"===u?e=l().orderBy(e,["severity","timestamp","eventid"],["desc","desc","desc"]):"lastchange"===u&&(e=l().orderBy(e,["timestamp","severity","eventid"],["desc","desc","desc"])),e),g=e=>{const t=l().cloneDeep(e);if(t.hosts&&t.hosts.length){const e=t.hosts[0];t.host=e.name,t.hostTechName=e.host,e.proxy&&(t.proxy=e.proxy)}return t.tags&&0===t.tags.length&&(t.tags=void 0),t.comments&&n.allowDangerousHTML&&(t.comments=t.comments.replace("\n","<br>")),t.lastchangeUnix=Number(t.lastchange),t},f=e=>{if(!e)return[];const t=l().map(e.split(","),(e=>e.trim()));return l().map(t,(e=>{const t=e.split(":");return{tag:t[0].trim(),value:t[1].trim()}}))},v=e=>l().map(e,(e=>`${e.tag}:${e.value}`)).join(", "),w=(P=At((function*(e){const t=[e.triggerid],n=Math.ceil(s.dateMath.parse(r.from).unix()),o=Math.ceil(s.dateMath.parse(r.to).unix());return(yield(0,b.getDataSourceSrv)().get(e.datasource)).zabbix.getEvents(t,n,o,[0,1],100)})),function(e){return P.apply(this,arguments)});var P;const C=function(){var e=At((function*(e){if(!e.eventid)return Promise.resolve([]);const t=[e.eventid];return(yield(0,b.getDataSourceSrv)().get(e.datasource)).zabbix.getEventAlerts(t)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=At((function*(e){var t;const n=(null===(t=e.hosts)||void 0===t?void 0:t.length)?e.hosts[0].hostid:null;return(yield(0,b.getDataSourceSrv)().get(e.datasource)).zabbix.getScripts([n])}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=At((function*(e,t){var n;const r=(null===(n=e.hosts)||void 0===n?void 0:n.length)?e.hosts[0].hostid:null;return(yield(0,b.getDataSourceSrv)().get(e.datasource)).zabbix.executeScript(r,t)}));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=At((function*(e,t){const{message:n,action:r,severity:o}=t,a=e.eventid,s=E.contextSrv.user.name+" (Grafana): "+n,i=yield(0,b.getDataSourceSrv)().get(e.datasource),l=E.contextSrv.isEditor||E.contextSrv.isGrafanaAdmin;return i.disableReadOnlyUsersAck&&!l?{message:"You have no permissions to acknowledge events."}:a?i.zabbix.acknowledgeEvent(a,s,r,o):{message:"Trigger has no events. Nothing to acknowledge."}}));return function(t,n){return e.apply(this,arguments)}}(),N=(e,t)=>{o(_t(Bt({},n),{pageSize:e}))},T=e=>{o(_t(Bt({},n),{resizedColumns:e}))},O=(n,r,o,a)=>{o||a?((n,r)=>{var o;const a=e=>e.tag===n.tag&&e.value===n.value,s=null===(o=t.request)||void 0===o?void 0:o.targets;let i=!1;for(const e of s){var c;if((null===(c=e.datasource)||void 0===c?void 0:c.uid)===(null==r?void 0:r.uid)||e.datasource===r){var u;const t=null===(u=e.tags)||void 0===u?void 0:u.filter;let n=f(t);l().remove(n,a),n=l().uniqWith(n,l().isEqual);const r=v(n);e.tags.filter=r,i=!0}}if(i){const t=new m(s);e.eventBus.publish(t)}})(n,r):((n,r)=>{var o;const a=null===(o=t.request)||void 0===o?void 0:o.targets;let s=!1;for(const e of a){var i;if((null===(i=e.datasource)||void 0===i?void 0:i.uid)===(null==r?void 0:r.uid)||e.datasource===r){var c;const t=null===(c=e.tags)||void 0===c?void 0:c.filter;let r=f(t);const o={tag:n.tag,value:n.value};r.push(o),r=l().uniqWith(r,l().isEqual);const a=v(r);e.tags.filter=a,s=!0}}if(s){const t=new m(a);e.eventBus.publish(t)}})(n,r)};return y().createElement(y().Fragment,null,"list"===a&&(()=>{const e=d(),t=parseInt(n.fontSize.slice(0,n.fontSize.length-1),10),r=t&&100!==t?t:void 0;return y().createElement(Mt,{problems:e,panelOptions:n,pageSize:n.pageSize,fontSize:r,onProblemAck:k,onTagClick:O})})(),"table"===a&&(()=>{const e=d(),t=parseInt(n.fontSize.slice(0,n.fontSize.length-1),10),o=t&&100!==t?t:void 0;return y().createElement(ft,{problems:e,panelOptions:n,pageSize:n.pageSize,fontSize:o,timeRange:r,getProblemEvents:w,getProblemAlerts:C,getScripts:x,onExecuteScript:S,onProblemAck:k,onColumnResize:T,onPageSizeChange:N,onTagClick:O})})())})).setPanelChangeHandler(((e,t,n)=>{var r;return null!==(r=e.options)&&void 0!==r?r:{}})).setMigrationHandler((e=>{var t,n;let r=null!==(n=e.options)&&void 0!==n?n:{};var o;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},{layout:e.layout,hostField:e.hostField,hostTechNameField:e.hostTechNameField,hostGroups:e.hostGroups,hostProxy:e.hostProxy,showTags:e.showTags,statusField:e.statusField,statusIcon:e.statusIcon,severityField:e.severityField,ackField:e.ackField,ageField:e.ageField,descriptionField:e.descriptionField,descriptionAtNewLine:e.descriptionAtNewLine,hostsInMaintenance:e.hostsInMaintenance,showTriggers:e.showTriggers,sortProblems:e.sortProblems,limit:e.limit,fontSize:e.fontSize,pageSize:e.pageSize,problemTimeline:e.problemTimeline,highlightBackground:e.highlightBackground,highlightNewEvents:e.highlightNewEvents,highlightNewerThan:e.highlightNewerThan,customLastChangeFormat:e.customLastChangeFormat,lastChangeFormat:e.lastChangeFormat,resizedColumns:e.resizedColumns,triggerSeverity:e.triggerSeverity,okEventColor:e.okEventColor,ackEventColor:e.ackEventColor,markAckEvents:e.markAckEvents,showEvents:null!==(o=null===(t=e.showEvents)||void 0===t?void 0:t.value)&&void 0!==o?o:e.showEvents},r)})).setPanelOptions((e=>{e.addSelect({path:"layout",name:"Layout",defaultValue:It.layout,settings:{options:[{label:"Table",value:"table"},{label:"List",value:"list"}]}}).addSelect({path:"sortProblems",name:"Sort by",defaultValue:It.sortProblems,settings:{options:[{label:"Default",value:"default"},{label:"Last change",value:"lastchange"},{label:"Severity",value:"priority"}]}}).addSelect({path:"fontSize",name:"Font size",defaultValue:It.fontSize,settings:{options:Jt}}).addNumberInput({path:"pageSize",name:"Page size",defaultValue:It.pageSize}).addBooleanSwitch({path:"problemTimeline",name:"Problem timeline",defaultValue:It.problemTimeline,showIf:e=>"table"===e.layout}).addBooleanSwitch({path:"highlightBackground",name:"Highlight background",defaultValue:It.highlightBackground,showIf:e=>"list"===e.layout}).addBooleanSwitch({path:"highlightNewEvents",name:"Highlight new events",defaultValue:It.highlightNewEvents}).addTextInput({path:"highlightNewerThan",name:"Newer than",defaultValue:It.highlightNewerThan,showIf:e=>e.highlightNewEvents}).addBooleanSwitch({path:"customLastChangeFormat",name:"Custom last change format",defaultValue:It.customLastChangeFormat}).addTextInput({path:"lastChangeFormat",name:"Last change format",defaultValue:It.lastChangeFormat,description:"See moment.js dosc for time format http://momentjs.com/docs/#/displaying/format/",settings:{placeholder:"dddd, MMMM Do YYYY, h:mm:ss a"},showIf:e=>e.customLastChangeFormat}).addBooleanSwitch({path:"allowDangerousHTML",name:"Allow HTML",description:"Format problem description and other data as HTML. Use with caution, it's potential cross-site scripting (XSS) vulnerability.",defaultValue:It.allowDangerousHTML}).addCustomEditor({id:"resetColumns",path:"resizedColumns",name:"Reset resized columns",editor:Wt,showIf:e=>"table"===e.layout}).addCustomEditor({id:"triggerColors",path:"triggerSeverity",name:"Problem colors",editor:Gt,defaultValue:It.triggerSeverity,category:["Colors"]}).addBooleanSwitch({path:"markAckEvents",name:"Mark acknowledged events",defaultValue:It.markAckEvents,category:["Colors"]}).addColorPicker({path:"ackEventColor",name:"Acknowledged color",defaultValue:It.ackEventColor,showIf:e=>e.markAckEvents,settings:[{enableNamedColors:!1}],category:["Colors"]}).addColorPicker({path:"okEventColor",name:"OK event color",defaultValue:It.okEventColor,settings:[{enableNamedColors:!1}],category:["Colors"]}).addBooleanSwitch({path:"hostField",name:"Host name",defaultValue:It.hostField,category:["Fields"]}).addBooleanSwitch({path:"hostTechNameField",name:"Technical name",defaultValue:It.hostTechNameField,category:["Fields"]}).addBooleanSwitch({path:"hostGroups",name:"Host groups",defaultValue:It.hostGroups,category:["Fields"]}).addBooleanSwitch({path:"hostProxy",name:"Host proxy",defaultValue:It.hostProxy,category:["Fields"]}).addBooleanSwitch({path:"showTags",name:"Tags",defaultValue:It.showTags,category:["Fields"]}).addBooleanSwitch({path:"statusField",name:"Status",defaultValue:It.statusField,category:["Fields"]}).addBooleanSwitch({path:"statusIcon",name:"Status icon",defaultValue:It.statusIcon,category:["Fields"]}).addBooleanSwitch({path:"severityField",name:"Severity",defaultValue:It.severityField,category:["Fields"]}).addBooleanSwitch({path:"ackField",name:"Ack",defaultValue:It.ackField,category:["Fields"]}).addBooleanSwitch({path:"ageField",name:"Age",defaultValue:It.ageField,category:["Fields"]}).addBooleanSwitch({path:"opdataField",name:"Operational data",defaultValue:It.opdataField,category:["Fields"]}).addBooleanSwitch({path:"descriptionField",name:"Description",defaultValue:It.descriptionField,showIf:e=>"list"===e.layout,category:["Fields"]}).addBooleanSwitch({path:"descriptionAtNewLine",name:"At the new line",defaultValue:It.descriptionAtNewLine,showIf:e=>"list"===e.layout,category:["Fields"]})})),Jt=[{label:"80%",value:"80%"},{label:"90%",value:"90%"},{label:"100%",value:"100%"},{label:"110%",value:"110%"},{label:"120%",value:"120%"},{label:"130%",value:"130%"},{label:"150%",value:"150%"},{label:"160%",value:"160%"},{label:"180%",value:"180%"},{label:"200%",value:"200%"},{label:"220%",value:"220%"},{label:"250%",value:"250%"}]})(),p})()));
//# sourceMappingURL=module.js.map